import{as as fe,r as l,b5 as me,a6 as Z,a5 as a,a9 as C,aa as W,b6 as pe,aD as ge,aI as ve,aP as he,aE as B,aF as Y,az as xe}from"./index-45243e94.js";function ye(s){var r=fe(l.useState(s),2),t=r[0],i=r[1],h=me(t),p=l.useCallback(function(){return h.current},[]);return[t,i,p]}const S="adm-page-indicator",Pe={color:"primary",direction:"horizontal"},we=l.memo(s=>{const r=Z(Pe,s),t=[];for(let i=0;i<r.total;i++)t.push(a.createElement("div",{key:i,className:C(`${S}-dot`,{[`${S}-dot-active`]:r.current===i})}));return W(r,a.createElement("div",{className:C(S,`${S}-${r.direction}`,`${S}-color-${r.color}`)},t))});const ee=s=>W(s,a.createElement("div",{className:"adm-swiper-item",onClick:s.onClick},s.children));function $e(s){const[r,t]=l.useState(s),i=l.useRef(r);return l.useEffect(()=>{i.current=r},[r]),[r,t,i]}function Ie(s,r){const t=Object.keys(s),i=Object.keys(r),h=new Set([...t,...i]),p={};return h.forEach(x=>{const y=s[x],P=r[x];typeof y=="function"&&typeof P=="function"?p[x]=function(...f){y(...f),P(...f)}:p[x]=y||P}),p}const v="adm-swiper",be={mousedown:"onMouseDown",mousemove:"onMouseMove",mouseup:"onMouseUp"},ke={defaultIndex:0,allowTouchMove:!0,autoplay:!1,autoplayInterval:3e3,loop:!1,direction:"horizontal",slideSize:100,trackOffset:0,stuckAtBoundary:!0,rubberband:!0,stopPropagation:[]};let N;const Se=l.forwardRef(pe((s,r)=>{const t=Z(ke,s),{direction:i,total:h,children:p,indicator:x}=t,[y]=l.useState({}),P=l.useRef(null),f=i==="vertical",E=t.slideSize/100,A=t.trackOffset/100,{validChildren:F,count:te,renderChildren:T}=l.useMemo(()=>{let g=0,I,$;return typeof p=="function"?I=p:$=a.Children.map(p,m=>!a.isValidElement(m)||m.type!==ee?null:(g++,m)),{renderChildren:I,validChildren:$,count:g}},[p]),u=h!=null?h:te;return u===0||!F&&!T?null:()=>{let g=t.loop;E*(u-1)<1&&(g=!1);const I=l.useRef(null);function $(){const e=I.current;return e?(f?e.offsetHeight:e.offsetWidth)*t.slideSize/100:0}const[m,ne,oe]=ye(t.defaultIndex),[H,K,z]=$e(!1);function R(e){let n=0,o=u-1;return t.stuckAtBoundary&&(n+=A/E,o-=(1-E-A)/E),B(e,n,o)}const[{position:w},O]=ge(()=>({position:R(m)*100,config:{tension:200,friction:30},onRest:()=>{if(z.current||!g)return;const e=w.get(),n=100*u,o=V(e,n);o!==e&&O.start({position:o,immediate:!0})}}),[u]),_=l.useRef(null);function re(){var e;(e=_.current)===null||e===void 0||e.call(_),z.current=!1}const se=ve(e=>{if(_.current=e.cancel,!e.intentional||(e.first&&!N&&(N=y),N!==y))return;N=e.last?void 0:y;const n=$();if(!n)return;const o=f?1:0,d=e.offset[o],c=e.direction[o],M=e.velocity[o];if(K(!0),!e.last)O.start({position:d*100/n,immediate:!0});else{const k=Math.floor(d/n),ue=k+1,de=Math.round((d+M*2e3*c)/n);b(B(de,k,ue)),window.setTimeout(()=>{K(!1)})}},{transform:([e,n])=>[-e,-n],from:()=>{const e=$();return[w.get()/100*e,w.get()/100*e]},triggerAllEvents:!0,bounds:()=>{if(g)return{};const e=$(),n=R(0)*e,o=R(u-1)*e;return f?{top:n,bottom:o}:{left:n,right:o}},rubberband:t.rubberband,axis:f?"y":"x",preventScroll:!f,pointer:{touch:!0}});function b(e,n=!1){var o;const d=Math.round(e),c=g?V(d,u):B(d,0,u-1);c!==oe()&&((o=t.onIndexChange)===null||o===void 0||o.call(t,c)),ne(c),O.start({position:(g?d:R(d))*100,immediate:n})}function L(){b(Math.round(w.get()/100)+1)}function U(){b(Math.round(w.get()/100)-1)}l.useImperativeHandle(r,()=>({swipeTo:b,swipeNext:L,swipePrev:U})),he(()=>{const e=u-1;m>e&&b(e,!0)});const{autoplay:j,autoplayInterval:G}=t,X=()=>{P.current=window.setTimeout(()=>{j==="reverse"?U():L(),X()},G)};l.useEffect(()=>{if(!(!j||H))return X(),()=>{P.current&&window.clearTimeout(P.current)}},[j,G,H,u]);function q(e,n){let o={};return g&&(o={[f?"y":"x"]:w.to(d=>{let c=-d+e*100;const M=u*100,k=M/2;return c=V(c+k,M)-k,`${c}%`}),[f?"top":"left"]:`-${e*100}%`}),a.createElement(Y.div,{className:C(`${v}-slide`,{[`${v}-slide-active`]:m===e}),style:o,key:e},n)}function J(){if(T&&h){const n=Math.max(m-2,0),o=Math.min(m+2,h-1),d=[];for(let c=n;c<=o;c+=1)d.push(q(c,T(c)));return a.createElement(a.Fragment,null,a.createElement("div",{className:`${v}-slide-placeholder`,style:{width:`${n*100}%`}}),d)}return a.Children.map(F,(e,n)=>q(n,e))}function ae(){return g?a.createElement("div",{className:`${v}-track-inner`},J()):a.createElement(Y.div,{className:`${v}-track-inner`,style:{[f?"y":"x"]:w.to(e=>`${-e}%`)}},J())}const ie={"--slide-size":`${t.slideSize}%`,"--track-offset":`${t.trackOffset}%`},ce=Object.assign({},t.allowTouchMove?se():{}),Q={};for(const e of t.stopPropagation){const n=be[e];Q[n]=function(o){o.stopPropagation()}}const le=Ie(ce,Q);let D=null;return typeof x=="function"?D=x(u,m):x!==!1&&(D=a.createElement("div",{className:`${v}-indicator`},a.createElement(we,Object.assign({},t.indicatorProps,{total:u,current:m,direction:i})))),W(t,a.createElement("div",{className:C(v,`${v}-${i}`),style:ie},a.createElement("div",Object.assign({ref:I,className:C(`${v}-track`,{[`${v}-track-allow-touch-move`]:t.allowTouchMove}),onClickCapture:e=>{z.current&&e.stopPropagation(),re()}},le),ae()),D))}}));function V(s,r){const t=s%r;return t<0?t+r:t}const Ee=xe(Se,{Item:ee});export{Ee as S};

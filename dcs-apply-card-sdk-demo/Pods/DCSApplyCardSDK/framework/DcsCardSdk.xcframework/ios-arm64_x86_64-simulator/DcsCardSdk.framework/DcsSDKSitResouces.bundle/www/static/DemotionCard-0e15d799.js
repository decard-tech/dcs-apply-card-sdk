var _=(s,d,l)=>new Promise((h,t)=>{var y=r=>{try{p(l.next(r))}catch(i){t(i)}},g=r=>{try{p(l.throw(r))}catch(i){t(i)}},p=r=>r.done?h(r.value):Promise.resolve(r.value).then(y,g);p((l=l.apply(s,d)).next())});import{r as m,u as b,b as F,t as f,X as L,e,j as c,K as n,a0 as N,B as v,f as A,k as j}from"./index-45243e94.js";import{R as x}from"./index-73cc4a09.js";import{S as w}from"./index-4ff9aec5.js";import"./native-input-10f267fd.js";const R=m.memo(()=>{const[s,d]=m.useState(!1),[l,h]=m.useState(0),[t,y]=m.useState(),{appliedCardsFlat:g,channelApplyNo:p,applicationType:r,jumioApplyNo:i,myinfoApplyNo:S,jumioInfoData:o}=b(a=>a.cardApply),u=F();m.useEffect(()=>(d(!0),f("/dcs-apply-online/card/apply/login/querySpareApplyCard",{cardAndProductList:g}).then(a=>{a&&a.length>0?y(a):u("/result-page",{replace:!0})}).catch(()=>{u("/result-page",{replace:!0})}).finally(()=>{d(!1)}),()=>{L()}),[]);const k=()=>_(void 0,null,function*(){var a;if(t){d(!0);try{yield f("/dcs-apply-online/card/apply/login/saveSpareApplyCard",{cardAndProductList:[{productId:t[l].productId,channelCreditCardId:(a=t[l])==null?void 0:a.channelCreditCardId}],channelApplyNo:r==2||r==3?p:i}),r===4&&(yield f("/dcs-apply-online/card/apply/login/sumbitApplication/v5",{channelApplyNo:i,applicationType:r,myinfoApplyNo:S,jumioAccountId:o==null?void 0:o.accountId,jumioWorkflowExecutionId:o==null?void 0:o.workflowId})),u("/result-page",{replace:!0}),d(!1)}catch(C){d(!1)}}}),I=()=>{u("/login")};return e("div",{className:"text-center",children:s?c("div",{className:"my-30",children:[e(w.Title,{animated:!0}),e(w.Paragraph,{lineCount:5,animated:!0})]}):c(j,{children:[c("div",{className:"text-sm font-medium my-6",children:[e(n,{id:"demotion_card_disw"}),e(n,{id:"demotion_card_dis1",className:"mt-4"})]}),c("div",{className:"m-2.5 bg-white rounded-lg py-8 px-3 shadow-lg text-sm font-medium leading-loose",children:[e(n,{id:"demotion_card_dis2"}),e(n,{id:"demotion_card_dis3"}),e("div",{children:e(x.Group,{defaultValue:0,onChange:a=>{h(a)},children:e(N,{direction:"vertical",block:!0,children:t==null?void 0:t.map((a,C)=>e(x,{value:C,children:c("div",{className:"flex items-center",children:[e("p",{className:"pl-2 w-52 text-left",children:a.channelCardName}),e("img",{width:100,src:a.channelCardShowImage,alt:a.channelCardName})]})},a.channelCreditCardId))})})}),e(n,{id:"demotion_card_intro1"}),e(n,{id:"demotion_card_intro2"}),e(n,{id:"demotion_card_intro3"})]}),c(N,{direction:"vertical",block:!0,className:"mx-12 my-20",children:[e(v,{block:!0,color:"primary",shape:"rounded",onClick:k,loading:s,children:e(A,{id:"demotions_card_apply"})}),e(v,{color:"primary",fill:"none",loading:s,onClick:I,children:e(A,{id:"demotions_card_returnHome"})})]})]})})});export{R as default};

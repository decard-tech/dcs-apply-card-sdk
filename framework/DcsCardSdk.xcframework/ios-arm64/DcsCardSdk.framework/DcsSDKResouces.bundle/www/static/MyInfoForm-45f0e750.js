var ge=Object.defineProperty,we=Object.defineProperties;var Ce=Object.getOwnPropertyDescriptors;var le=Object.getOwnPropertySymbols;var Se=Object.prototype.hasOwnProperty,Oe=Object.prototype.propertyIsEnumerable;var ae=(t,s,n)=>s in t?ge(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,P=(t,s)=>{for(var n in s||(s={}))Se.call(s,n)&&ae(t,n,s[n]);if(le)for(var n of le(s))Oe.call(s,n)&&ae(t,n,s[n]);return t},z=(t,s)=>we(t,Ce(s));var J=(t,s,n)=>new Promise((u,x)=>{var h=_=>{try{o(n.next(_))}catch(y){x(y)}},k=_=>{try{o(n.throw(_))}catch(y){x(y)}},o=_=>_.done?u(_.value):Promise.resolve(_.value).then(h,k);o((n=n.apply(t,s)).next())});import{r as C,u as v,e,j as r,a0 as A,a1 as g,F as m,k as R,f as i,I as O,g as l,K as a,J as T,b as _e,B as U,a2 as ue,a3 as Ae,h as Le,a as je,O as Fe,M as ve,$ as ke,t as Y,R as Ee,p as Te,Q as ne,P as de,a4 as q,S as Pe}from"./index-6964e077.js";import{D as B,M as ce,S as Re,F as Ue}from"./myinfoform-bf2f482c.js";import{M as he}from"./OTPInputPanel-6dedce77.js";import{C as w}from"./card-5ffd29b5.js";import{D as $e}from"./index-f481c4e9.js";import{D as Ve}from"./divider-efd6ebd0.js";import{C as G}from"./index-400527c4.js";import{R as $}from"./index-39ddfd98.js";import"./search-bar-18f27248.js";import"./native-input-fa1ff988.js";const Me=C.memo(()=>{const t=v(n=>n.cardApply);let s=P({},t.myInfoData);return s==null||delete s.passexpirydate,v(n=>n.user),console.log("9898098",s),!s||Object.keys(s).length==0?e(R,{}):r(w,{title:e(i,{id:"apply_form_personal_info"}),className:"p-0 rounded-lg",headerClassName:"px-5",children:[r(A,{direction:"vertical",block:!0,className:"px-5",children:[r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor",id:"apply_form_name"}),e("span",{className:"font-bold",children:s==null?void 0:s.custName})]}),(s==null?void 0:s.aliasName)&&r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor",id:"apply_form_alias_name"}),e("span",{className:"font-bold",children:s==null?void 0:s.aliasName})]}),r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor",id:"apply_form_gender"}),e("span",{className:"font-bold",children:g("GENDER",s==null?void 0:s.gender)})]}),r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor",id:"apply_form_date_of_birth"}),e("span",{className:"font-bold",children:e(T,{value:s==null?void 0:s.birthDate})})]}),r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor",id:"apply_form_nationality"}),e("span",{className:"font-bold",children:g("COUNTRY_CODE_ISO2",s==null?void 0:s.nationality)})]}),r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor",id:"apply_form_NRIC_FIN"}),e("span",{className:"font-bold",children:s==null?void 0:s.icNumber})]}),r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor",id:"apply_form_your_country"}),e("span",{className:"font-bold",children:g("COUNTRY_CODE_ISO2",s==null?void 0:s.countryOfBirth)})]}),r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor",id:"apply_form_maritial_status"}),e("span",{className:"font-bold",children:g("MARITAL_STATUS",s==null?void 0:s.maritalStatus)})]}),r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor",id:"apply_form_race"}),e("span",{className:"font-bold",children:(s==null?void 0:s.race)||"-"})]}),(s==null?void 0:s.residentialStatus)&&r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor",id:"apply_form_residential_status"}),e("span",{className:"font-bold",children:g("RESIDENTIAL_STATUS_MYINFO",s==null?void 0:s.residentialStatus)})]}),s!=null&&s.mobile?r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor",id:"apply_form_mobile_phone"}),e("span",{className:"font-bold",children:(s==null?void 0:s.mobile)||"-"})]}):null]}),e(Ve,{className:"mt-8"}),r("div",{className:"px-5",children:[!s.mobile&&e(m.Item,{name:"mobile",label:e(i,{id:"apply_form_mobile_phone"}),rules:[{required:!0,validator:(n,u)=>{if(u!=null&&u.phone){if(u.areaCode==="+65"&&!/^[0-9]{8}$/.test(u.phone))return Promise.reject(l("rule_digits",{string:"8"}));if(u.areaCode==="+86"&&!/^[0-9]{11}$/.test(u.phone))return Promise.reject(l("rule_digits",{string:"11"}));if(!/^[0-9]{8,20}$/.test(u.phone))return Promise.reject(l("rule_digits",{string:"8-20"}))}return Promise.resolve()}}],children:e(he,{})}),s.isAlien!=="1"&&r(R,{children:[e(m.Item,{name:"passport",label:e(i,{id:"apply_form_passport_num"}),initialValue:s==null?void 0:s.passport,children:e(O,{maxLength:32,placeholder:l("apply_form_please_enter")+l("apply_form_passport_num")})}),e(m.Item,{name:"passportExpiryDate",label:e(i,{id:"apply_form_passport_expiry_date"}),trigger:"onConfirm",onClick:(n,u)=>{var x;(x=u.current)==null||x.open()},initialValue:s!=null&&s.passexpirydate?new Date(s==null?void 0:s.passexpirydate):void 0,children:e($e,{children:n=>e("div",{className:`adm-input ${n?"text-default":"text-minor"}`,children:n?e(T,{value:n}):l("apply_form_please_enter")+l("apply_form_passport_expiry_date")})})})]}),e(m.Item,{name:"email",label:e(i,{id:"apply_form_email"}),initialValue:s.email,rules:[{required:!0},{type:"email"}],children:e(O,{autoCapitalize:"",className:"uppercase",placeholder:l("apply_form_please_enter")+l("apply_form_email"),maxLength:320})})]})]})}),ze=C.memo(()=>{var x,h,k;const{myInfoData:t,appliedCards:s}=v(o=>o.cardApply);v(o=>o.user);const n=_e(),u=C.useMemo(()=>({0:l("status_submitted"),1:l("status_processing"),2:l("status_approved"),3:l("status_supporting_documents"),4:l("status_rejected"),5:l("status_cancel")}),[]);return!t||!s[0]||Object.keys(t).length==0?e(R,{}):(console.log("myInfoData.passportVerificationStatus",t.passportVerificationStatus,u[t.passportVerificationStatus]),(x=s[0].productList[0])!=null&&x.tenCardsFlag,r(A,{direction:"vertical",block:!0,children:[e(w,{title:r("div",{className:"flex justify-between items-center text-sm",children:[e(i,{id:"apply_form_declaration_particulars"}),e(U,{color:"primary",fill:"none",className:"text-xs font-normal",onClick:()=>{n("/myinfo/1?back=true")},children:e(i,{id:"apply_form_declaration_edit"})})]}),className:"p-0 rounded-lg",headerClassName:"px-5",children:r(A,{direction:"vertical",block:!0,className:"px-5",children:[r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor text-xs",id:"apply_form_name"}),e("span",{className:"w-2/4 text-xs text-right break-words",children:t.custName})]}),t.aliasName&&r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor text-xs",id:"apply_form_alias_name"}),e("span",{className:"w-2/4 text-xs text-right break-words",children:t.aliasName})]}),r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor text-xs",id:"apply_form_gender"}),e("span",{className:"w-2/4 text-xs text-right break-words",children:g("GENDER",t.gender)})]}),r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor text-xs",id:"apply_form_date_of_birth"}),e("span",{className:"w-2/4 text-xs text-right break-words",children:e(T,{value:t.birthDate})})]}),r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor text-xs",id:"apply_form_nationality"}),e("span",{className:"w-2/4 text-xs text-right break-words",children:g("COUNTRY_CODE_ISO2",t.nationality)})]}),r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor text-xs",id:"apply_form_NRIC_FIN"}),e("span",{className:"w-2/4 text-xs text-right break-words",children:t.icNumber})]}),r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor text-xs",id:"apply_form_your_country"}),e("span",{className:"w-2/4 text-xs text-right break-words",children:g("COUNTRY_CODE_ISO2",t.countryOfBirth)})]}),r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor text-xs",id:"apply_form_maritial_status"}),e("span",{className:"w-2/4 text-xs text-right break-words",children:g("MARITAL_STATUS",t.maritalStatus)})]}),r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor text-xs",id:"apply_form_race"}),e("span",{className:"w-2/4 text-xs text-right break-words",children:t.race||"-"})]}),t.residentialStatus&&r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor text-xs",id:"apply_form_residential_status"}),e("span",{className:"w-2/4 text-xs text-right break-words",children:g("RESIDENTIAL_STATUS_MYINFO",t.residentialStatus)})]}),t.passport&&r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor text-xs",id:"apply_form_passport_num"}),e("span",{className:"w-2/4 text-xs text-right break-words",children:t.passport})]}),t.passportExpiryDate&&r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor text-xs",id:"apply_form_passport_expiry_date"}),e("span",{className:"w-2/4 text-xs text-right break-words",children:e(T,{value:t.passportExpiryDate})})]}),r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor text-xs",id:"apply_form_mobile_phone"}),e("span",{className:"w-2/4 text-xs text-right break-words",children:t.mobile||"-"})]}),r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor text-xs",id:"apply_form_email"}),e("span",{className:"w-2/4 text-xs text-right break-words",children:t.email||"-"})]})]})}),e(w,{title:r("div",{className:"flex justify-between items-center text-sm",children:[e(i,{id:"apply_form_residence_details"}),e(U,{color:"primary",fill:"none",className:"text-xs font-normal",onClick:()=>{n("/myinfo/2?back=true")},children:e(i,{id:"apply_form_declaration_edit"})})]}),className:"p-0 rounded-lg ",headerClassName:"px-5",children:r(A,{direction:"vertical",block:!0,className:"px-5",children:[t.residentAddress&&r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor text-xs",id:"apply_form_proOwnStatus"}),e("span",{className:"w-2/4 text-xs text-right break-words capitalize",children:t.proOwnStatus})]}),((h=t.residentAddress)==null?void 0:h.homePhone)&&r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor text-xs",id:"apply_form_home_phone"}),e("span",{className:"w-2/4 text-xs text-right break-words capitalize",children:t.residentAddress.homePhone})]}),t.residentAddress&&r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor text-xs",id:"common_address"}),e("span",{className:"w-2/4 text-xs text-right break-words",children:oe(t.residentAddress)})]})]})}),e(w,{title:r("div",{className:"flex justify-between items-center text-sm",children:[e(i,{id:"apply_form_mailing_addr"}),e(U,{color:"primary",fill:"none",className:"text-xs font-normal",onClick:()=>{n("/myinfo/2?back=true")},children:e(i,{id:"apply_form_declaration_edit"})})]}),className:"p-0 rounded-lg ",headerClassName:"px-5",children:e(A,{direction:"vertical",block:!0,className:"px-5 my-2",children:t.residentAddress&&r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor text-xs",id:"common_address"}),e("span",{className:"w-2/4 text-xs text-right break-words",children:oe((k=t.billingAddress)!=null&&k.block?t.billingAddress:t.residentAddress)})]})})}),e(w,{title:e("div",{className:"flex justify-between items-center text-sm",children:e(i,{id:"apply_form_assessable_income"})}),className:"p-0 rounded-lg ",headerClassName:"px-5",children:e("div",{className:"px-5",children:r("table",{border:1,cellPadding:9,className:"w-full text-center my-4 px-5",style:{background:"#F6F8FB"},children:[e("thead",{children:r("tr",{children:[e("th",{className:"text-xs font-normal",children:e(i,{id:"apply_form_date"})}),e("th",{className:"text-xs font-normal",children:e(i,{id:"apply_form_amount"})})]})}),e("tbody",{children:t==null?void 0:t.noahistoryBasics.map((o,_)=>r("tr",{children:[e("td",{className:"text-xs font-normal",children:o.yearofassessment}),e("td",{className:"text-xs font-normal",children:pe(o.amount/100,2)})]},_))})]})})}),e(w,{title:r("div",{className:"flex justify-between items-center text-sm",children:[e(i,{id:"apply_form_employment_details"}),e(U,{color:"primary",fill:"none",className:"text-xs font-normal",onClick:()=>{n("/myinfo/3?back=true")},children:e(i,{id:"apply_form_declaration_edit"})})]}),className:"p-0 rounded-lg ",headerClassName:"px-5",children:r(A,{direction:"vertical",block:!0,className:"px-5",children:[r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor text-xs",id:"apply_form_self_employed"}),e("span",{className:"w-2/4 text-xs text-right break-words capitalize",children:t.selfEmployment})]}),t.selfEmployment==="N"&&r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor text-xs",id:"apply_form_employer_name"}),e("span",{className:"w-2/4 text-xs text-right break-words capitalize",children:t.companyName})]}),r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor text-xs",id:"apply_form_job_title"}),e("span",{className:"w-2/4 text-xs text-right break-words capitalize",children:g("PROFESSION",t.profession)})]}),t.jobSeniorityList&&t.jobSeniorityList.length>0?r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor text-xs",id:"apply_form_job_seniority_title"}),e("span",{className:"w-2/4 text-xs text-right break-words capitalize",children:t.jobSeniorityList.map(o=>g("JOB_SENIORITY_LIST",o)).join(", ")})]}):null,t.purposeOfAccountList&&t.purposeOfAccountList.length>0?r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor text-xs",id:"apply_form_account_purpose_title"}),e("span",{className:"w-2/4 text-xs text-right break-words capitalize",children:t.purposeOfAccountList.map(o=>g("PURPOSE_OF_ACCOUNT_LIST",o)).join(", ")})]}):null,t.sourceOfFundsList&&t.sourceOfFundsList.length>0?r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor text-xs",id:"apply_form_source_of_funds"}),e("span",{className:"w-2/4 text-xs text-right break-words capitalize",children:t.sourceOfFundsList.map(o=>g("SOURCE_OF_FUNDS_LIST",o)).join(", ")})]}):null,t.sourceOfFundsCountryList&&t.sourceOfFundsCountryList.length>0?r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor text-xs",id:"apply_form_source_of_funds_country"}),e("span",{className:"w-2/4 text-xs text-right break-words capitalize",children:t.sourceOfFundsCountryList.map(o=>g("SOURCE_OF_FUNDS_COUNTRY_LIST",o)).join(", ")})]}):null,t.sourceOfWealthList&&t.sourceOfWealthList.length>0?r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor text-xs",id:"apply_form_source_of_wealth"}),e("span",{className:"w-2/4 text-xs text-right break-words capitalize",children:t.sourceOfWealthList.map(o=>g("SOURCE_OF_WEALTH_LIST",o)).join(", ")})]}):null,t.isAlien==="0"&&r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor text-xs",id:"apply_guide_work_type"}),e("span",{className:"w-2/4 text-xs text-right break-words capitalize",children:t.passtype})]}),t.isAlien==="0"&&r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor text-xs",id:"apply_guide_work_status"}),e("span",{className:"w-2/4 text-xs text-right break-words capitalize",children:t.passstatus})]}),t.isAlien==="0"&&r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor text-xs",id:"apply_guide_work_maturity_time"}),e("span",{className:"w-2/4 text-xs text-right break-words capitalize",children:e(T,{value:t.passexpirydate})})]}),t.isAlien==="0"&&r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor text-xs",id:"apply_guide_work_department"}),e("span",{className:"w-2/4 text-xs text-right break-words capitalize",children:t.employmentsector})]})]})}),(t==null?void 0:t.cpfcontributions.length)!==0&&e(w,{title:e("div",{className:"flex justify-between items-center text-sm",children:e(i,{id:"apply_form_cpf_contribution"})}),className:"p-0 rounded-lg ",headerClassName:"px-5",children:e("div",{className:"",children:r("table",{border:1,cellPadding:9,className:"w-full text-center my-4",style:{background:"#F6F8FB"},children:[e("thead",{children:r("tr",{children:[e("th",{className:"text-xs font-normal",children:e(i,{id:"apply_form_contribution_onth"})}),e("th",{className:"text-xs font-normal",children:e(i,{id:"apply_form_date"})}),e("th",{className:"text-xs font-normal",children:e(i,{id:"apply_form_amount"})}),e("th",{className:"text-xs font-normal",children:e(i,{id:"apply_form_emplyer"})})]})}),e("tbody",{children:t.cpfcontributions.map((o,_)=>r("tr",{children:[e("td",{className:"text-xs font-normal",children:e(ue,{value:o.month})}),e("td",{className:"text-xs font-normal",children:e(T,{value:o.date})}),e("td",{className:"text-xs font-normal",children:pe(o.amount/100,2)}),e("td",{className:"text-xs font-normal",children:o.employer})]},_))})]})})}),e(w,{title:r("div",{className:"flex justify-between items-center text-sm",children:[e(i,{id:"apply_form_card_personalization"}),e(U,{color:"primary",fill:"none",className:"text-xs font-normal",onClick:()=>{n("/myinfo/4?back=true")},children:e(i,{id:"apply_form_declaration_edit"})})]}),className:"p-0 rounded-lg ",headerClassName:"px-5",children:r(A,{direction:"vertical",block:!0,className:"px-5",children:[r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor text-xs",id:"apply_form_credit_lit_preference"}),e("span",{className:"w-2/4 text-xs text-right break-words capitalize",children:(t==null?void 0:t.determineLimitFlag)==="N"?e(Ae,{value:Number(t.preCreditLimit),style:"currency",currency:"SGD"}):e(i,{id:"apply_form_let_dcs_determine"})})]}),r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor text-xs",id:"apply_form_name_on_card"}),e("span",{className:"w-2/4 text-xs text-right break-words capitalize",children:t.preNameOnCard})]})]})}),!!(t.isAlien==="0"&&t.passportVerificationStatus)&&e(w,{className:"p-0 rounded-lg px-5",children:r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor text-xs",id:"routeName_ID_Verification"}),e("span",{className:"w-2/4 text-xs text-right break-words capitalize",children:u[t.passportVerificationStatus]})]})}),e(w,{title:e("div",{className:"flex justify-between items-center text-sm",children:e(i,{id:"apply_form_consumer_advisory"})}),children:r("div",{className:"text-sm",children:[e("p",{children:l("apply_form_explain")}),r("p",{className:"mt-2",children:[l("apply_form_credit_bureau"),e("span",{className:"text-blue",children:"www.creditbureau.com.sg"})]}),r("p",{className:"",children:["● DP Credit Bureau Pte Ltd ",e("span",{className:"text-blue",children:"www.dpcreditbureau.sg"})]})]})}),e(w,{title:e("div",{children:e(i,{id:"apply_form_declaration_consent_title"})}),children:r(A,{direction:"vertical",block:!0,children:[e(m.Item,{name:"dncFlag",children:e(G,{children:l("apply_form_declaration_1a")})}),e(m.Item,{name:"usaTaxResident",children:e(G,{children:r("p",{children:[l("apply_form_declaration_3a"),e("br",{}),l("apply_form_declaration_3b"),e("br",{}),l("apply_form_declaration_3c")]})})}),e(m.Subscribe,{to:["usaTaxResident"],children:({usaTaxResident:o})=>{if(o)return e(m.Item,{label:e(i,{id:"apply_form_declaration_3d"}),name:"usaTaxTin",rules:[{required:!0},{pattern:/^[\w\s]{1,23}$/,message:l("rule_characters",{string:"1-23"})}],children:e(O,{maxLength:23,placeholder:l("apply_form_declaration_3e")})})}}),e(m.Item,{name:"pdpaFlag",rules:[{required:!0,message:l("apply_form_please_check")}],children:e(G,{children:r("p",{children:[e("span",{className:"text-red",children:"*"}),e(i,{id:"apply_form_authorization_text"}),e(i,{id:"apply_form_authorization_text2"}),e(i,{id:"apply_form_dcs_charge_credit1"}),e(i,{id:"apply_form_conditions"}),e(i,{id:"apply_form_application"})]})})})]})})]}))}),oe=t=>{if(!t)return"-";if(t.country==="SG")return`${t.block} ${t.street} # ${t.floor}-${t.unit} ${t.building||"-"} ${t.country} (${t.postal})`;if(t!=null&&t.line1)return`${t.line1} ${t==null?void 0:t.line2}`};function pe(t,s){return t?t.toFixed(s).toString().toLocaleString():"0"}const Ye=C.memo(()=>{let{myInfoData:t}=v(s=>s.cardApply);return!t||Object.keys(t).length==0?e(R,{}):r(w,{headerClassName:"px-5",title:r("div",{children:[e(a,{id:"apply_form_assessable_income"}),r("table",{border:1,cellPadding:9,className:"w-full text-center my-4",style:{background:"#F6F8FB"},children:[e("thead",{children:r("tr",{children:[e("th",{className:"text-xs font-normal",children:e(i,{id:"apply_form_date"})}),e("th",{className:"text-xs font-normal",children:e(i,{id:"apply_form_amount"})})]})}),e("tbody",{children:t==null?void 0:t.noahistoryBasics.map((s,n)=>r("tr",{children:[e("td",{className:"text-xs font-normal",children:s.yearofassessment}),e("td",{className:"text-xs font-normal",children:me(s.amount/100,2)})]},n))})]})]}),className:"p-0 rounded-lg",children:[r(A,{direction:"vertical",block:!0,className:"px-5",children:[e(a,{id:"apply_form_employment_details"}),e(m.Item,{name:"selfEmployment",rules:[{required:!0}],initialValue:t.selfEmployment==="Y",children:e(G,{defaultChecked:t.selfEmployment==="Y",children:e(i,{id:"apply_form_self_employed"})})}),e(m.Subscribe,{to:["selfEmployment"],children:({selfEmployment:s})=>{if(console.log("selfEmployment",s),!s)return e(m.Item,{name:"companyName",label:e(i,{id:"apply_form_employer_name"}),rules:[{required:!0}],initialValue:t.companyName,children:e(O,{maxLength:124,autoCapitalize:"characters",placeholder:l("apply_form_please_enter")+l("apply_form_employer_name")})})}}),e(m.Item,{name:"profession",label:e(i,{id:"apply_form_job_title"}),rules:[{required:!0}],initialValue:t.profession?[t.profession]:null,children:e(B,{dictType:"PROFESSION",placeholder:l("apply_form_please_choose")})}),e(m.Item,{name:"jobSeniorityList",label:e(i,{id:"apply_form_job_seniority_title"}),rules:[{required:!0}],initialValue:t.jobSeniorityList?[t.jobSeniorityList]:null,children:e(B,{dictType:"JOB_SENIORITY_LIST",placeholder:l("apply_form_please_choose")})}),e(m.Item,{name:"purposeOfAccountList",label:e(i,{id:"apply_form_account_purpose_title"}),rules:[{required:!0}],initialValue:t.purposeOfAccountList?[t.purposeOfAccountList]:null,children:e(B,{dictType:"PURPOSE_OF_ACCOUNT_LIST",placeholder:l("apply_form_please_choose")})}),e(m.Item,{name:"sourceOfFundsList",label:e(i,{id:"apply_form_source_of_funds_title"}),rules:[{required:!0}],initialValue:t.sourceOfFundsList?[t.sourceOfFundsList]:null,children:e(ce,{dictType:"SOURCE_OF_FUNDS_LIST",placeholder:l("apply_form_please_choose")})}),e(m.Item,{name:"sourceOfFundsCountryList",label:e(i,{id:"apply_form_source_of_funds_country"}),rules:[{required:!0}],initialValue:t.sourceOfFundsCountryList?[t.sourceOfFundsCountryList]:null,children:e(B,{dictType:"SOURCE_OF_FUNDS_COUNTRY_LIST",placeholder:l("apply_form_please_choose")})}),e(m.Item,{name:"sourceOfWealthList",label:e(i,{id:"apply_form_source_of_wealth_title"}),rules:[{required:!0}],initialValue:t.sourceOfWealthList?[t.sourceOfWealthList]:null,children:e(ce,{dictType:"SOURCE_OF_WEALTH_LIST",placeholder:l("apply_form_please_choose")})}),(t==null?void 0:t.isAlien)==="0"&&r(A,{direction:"vertical",block:!0,children:[r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor text-xs",id:"apply_guide_occupation"}),e("span",{className:"font-bold text-sm text-right",children:t==null?void 0:t.occupation})]}),r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor text-xs",id:"apply_guide_work_type"}),e("span",{className:"font-bold text-sm text-right",children:t==null?void 0:t.passtype})]}),r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor text-xs",id:"apply_guide_work_status"}),e("span",{className:"font-bold text-sm text-right",children:t==null?void 0:t.passstatus})]}),r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor text-xs",id:"apply_guide_work_maturity_time"}),e("span",{className:"font-bold text-sm text-right",children:e(T,{value:t==null?void 0:t.passexpirydate})})]}),r("div",{className:"flex justify-between items-center",children:[e(a,{className:"text-minor text-xs",id:"apply_guide_work_department"}),e("span",{className:"font-bold text-sm text-right",children:t==null?void 0:t.employmentsector})]})]})]}),(t==null?void 0:t.cpfcontributions.length)!==0&&r("div",{className:"p-5 mt-5",style:{borderTop:"solid 0.5px var(--adm-color-border)"},children:[e(a,{id:"apply_form_cpf_contribution"}),r("table",{border:1,cellPadding:9,className:"w-full text-center my-4",style:{background:"#F6F8FB"},children:[e("thead",{children:r("tr",{children:[e("th",{className:"text-xs font-normal w-24",children:e(i,{id:"apply_form_contribution_onth"})}),e("th",{className:"text-xs font-normal w-28",children:e(i,{id:"apply_form_date"})}),e("th",{className:"text-xs font-normal",children:e(i,{id:"apply_form_amount"})}),e("th",{className:"text-xs font-normal",children:e(i,{id:"apply_form_emplyer"})})]})}),e("tbody",{children:t==null?void 0:t.cpfcontributions.map((s,n)=>r("tr",{children:[e("td",{className:"text-xs font-normal",children:e(ue,{value:s.month})}),e("td",{className:"text-xs font-normal",children:e(T,{value:s.date})}),e("td",{className:"text-xs font-normal",children:me(s.amount/100,2)}),e("td",{className:"text-xs font-normal",children:s.employer})]},n))})]})]})]})});function me(t,s){return t?t.toFixed(s).toString().toLocaleString():"0"}const qe=C.memo(()=>{var o;const t=v(_=>_.user),{myInfoData:s,appliedCards:n}=v(_=>_.cardApply),u=n[0]&&((o=n[0].productList[0])==null?void 0:o.fixedLimit)==="1",[x,h]=C.useState(s==null?void 0:s.preNameOnCard);if(C.useState(!1),C.useEffect(()=>{h(s.preNameOnCard)},[s.preNameOnCard]),!s||Object.keys(s).length==0)return e(R,{});const k=_=>{h(_.toLocaleUpperCase())};return console.log("appliedCards",JSON.stringify(x),JSON.stringify(s)),r("div",{children:[!u&&e(w,{headerClassName:"px-5",title:e("div",{children:e(a,{id:"apply_form_credit_lit_preference"})}),className:"p-0 rounded-lg",children:r(A,{direction:"vertical",block:!0,className:"px-5",children:[e(m.Item,{name:"determineLimitFlag",rules:[{required:!0}],initialValue:"Y",children:e($.Group,{children:r(A,{direction:"vertical",children:[e($,{value:"Y",children:e(i,{id:"apply_form_let_dcs_determine"})}),e($,{value:"N",children:e(i,{id:"apply_form_set_my_preferred_limit"})})]})})}),e(m.Subscribe,{to:["determineLimitFlag"],children:({determineLimitFlag:_})=>{if(_!=="Y")return r("div",{className:"mt-10",children:[e(m.Item,{name:"preCreditLimit",rules:[{required:!0}],initialValue:1,children:e(Re,{residentPopover:!0,step:1,max:150,min:1,popover:y=>e("span",{children:y*1e3}),icon:e(Be,{})})}),r("div",{className:"flex justify-between text-xs",children:[e("span",{children:"S$ 1,000"}),e("span",{children:"S$ 150,000"})]}),e(a,{className:"text-xs text-minor mx-6 my-6 text-center",id:"apply_form_credit_limit_tip"})]})}})]})}),e(w,{headerClassName:"px-5 ",title:e("div",{children:e(a,{id:"apply_form_name_on_card"})}),className:"p-0 rounded-lg mt-4",children:r("div",{className:"px-5",children:[e(m.Item,{name:"preNameOnCard",label:e(i,{id:"apply_form_embossed_name"}),rules:[{required:!0},{pattern:/^[A-Za-z ]*$/,message:l("rule_alphabets_spaces")}],initialValue:s==null?void 0:s.preNameOnCard,children:e(O,{autoCapitalize:"characters",maxLength:19,minLength:2,onChange:k})}),n.map(_=>{let y=t.sdkData.productInfo.find(W=>W.productCode===_.productList[0].productCode);return console.log("sdkDataItem",y,_.channelCardShowImage),r("div",{className:"mt-5 relative",children:[e(Le,{src:y&&y.cardFace?y.cardFace:_.channelCardShowImage,alt:_.channelCardName}),e("span",{style:{position:"absolute",bottom:0,left:0},className:"text-base font-medium text-white pl-5 pb-5",children:t!=null&&t.showCardNameMaskOnCardFlag?x:""})]},_.channelCreditCardId)}),e("p",{className:"text-minor text-xs text-left mt-2",children:e(i,{id:"apply_guide_embossed_tip"})})]})})]})}),Be=()=>r("svg",{width:"38",height:"18",viewBox:"0 0 38 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e("rect",{x:"0.5",y:"0.5",width:"37",height:"17",rx:"8.5",fill:"#3366FF",stroke:"#E3FAFF"}),e("rect",{x:"16",y:"4",width:"10",height:"2",rx:"1",transform:"rotate(90 16 4)",fill:"#ACF0FF"}),e("rect",{x:"20",y:"4",width:"10",height:"2",rx:"1",transform:"rotate(90 20 4)",fill:"#ACF0FF"}),e("rect",{x:"24",y:"4",width:"10",height:"2",rx:"1",transform:"rotate(90 24 4)",fill:"#ACF0FF"})]}),Ge=t=>{var n,u;const{myInfoData:s}=v(x=>x.cardApply);return!s||Object.keys(s).length==0?e(R,{}):r("div",{style:{background:"rgb(246, 248, 251)"},children:[e(w,{title:e(i,{id:"apply_form_residence_details"}),className:"p-0 rounded-lg",headerClassName:"px-5",children:r("div",{className:"px-5",children:[e("p",{className:"font-bold text-base my-2",children:We(s==null?void 0:s.residentAddress)}),e(m.Item,{name:"proOwnStatus",label:e(i,{id:"apply_form_proOwnStatus"}),initialValue:(s==null?void 0:s.proOwnStatus)||"False",rules:[{required:!0}],children:e(O,{disabled:!0,placeholder:l("apply_form_please_enter")+l("apply_form_proOwnStatus")})}),e(m.Item,{name:"homePhone",label:e(i,{id:"apply_form_home_phone_optional"}),rules:[{validator:(x,h)=>{if(h!=null&&h.phone){if(h.areaCode==="+65"&&!/^[0-9]{8}$/.test(h.phone))return Promise.reject(l("rule_digits",{string:"8"}));if(h.areaCode==="+86"&&!/^[0-9]{11}$/.test(h.phone))return Promise.reject(l("rule_digits",{string:"11"}));if(!/^[0-9]{5,20}$/.test(h.phone))return Promise.reject(l("rule_digits",{string:"5-20"}))}return Promise.resolve()}}],initialValue:{areaCode:((n=s==null?void 0:s.residentAddress.homePhone)==null?void 0:n.split(" ")[0])||"+65",phone:((u=s==null?void 0:s.residentAddress.homePhone)==null?void 0:u.split(" ")[1])||""},children:e(he,{})})]})}),e(w,{title:e(i,{id:"apply_form_mailing_addr"}),className:"p-0 rounded-lg mt-4",headerClassName:"px-5",children:r("div",{className:"px-5",children:[e(m.Item,{initialValue:(s==null?void 0:s.sameResidentialFlag)||"Y",name:"sameResidentialFlag",required:!0,children:e($.Group,{children:r(A,{children:[e($,{value:"Y",children:e(i,{id:"apply_form_singapore_address"})}),e($,{value:"N",children:e(i,{id:"another_mailing_address"})})]})})}),e(m.Subscribe,{to:["sameResidentialFlag"],children:({sameResidentialFlag:x})=>{if(console.log("sameResidentialFlag",x),x!=="Y")return r(R,{children:[e(m.Item,{name:["billingAddress","block"],label:e(i,{id:"apply_form_block"}),rules:[{required:!0},{pattern:/^[\w\s]{1,10}$/,message:l("rule_characters",{string:"1-10"})}],initialValue:s==null?void 0:s.residentAddress.block,children:e(O,{placeholder:l("apply_form_please_enter")+l("apply_form_block")})}),e(m.Item,{name:["billingAddress","building"],label:e(i,{id:"apply_form_building"}),rules:[{pattern:/^[\w\s]{1,66}$/,message:l("rule_alphabets_numbers_spaces")}],initialValue:s==null?void 0:s.residentAddress.building,children:e(O,{placeholder:l("apply_form_please_enter")+l("apply_form_building")})}),e(m.Item,{name:["billingAddress","floor"],label:e(i,{id:"apply_form_floor"}),help:e(i,{id:"apply_form_floor_tips"}),rules:[{required:!0},{pattern:/^[A-Za-z0-9]{1,5}$/,message:l("rule_characters",{string:"1-5"})}],initialValue:s==null?void 0:s.residentAddress.floor,children:e(O,{placeholder:l("apply_form_please_enter")+l("apply_form_floor")})}),e(m.Item,{name:["billingAddress","unit"],label:e(i,{id:"apply_form_unit"}),rules:[{required:!0},{pattern:/^[0-9]{1,5}$/,message:l("rule_digits",{string:"1-5"})}],help:e(i,{id:"apply_form_unit_tips"}),initialValue:s==null?void 0:s.residentAddress.unit,children:e(O,{placeholder:l("apply_form_please_enter")+l("apply_form_unit")})}),e(m.Item,{name:["billingAddress","street"],label:e(i,{id:"apply_form_street_name"}),rules:[{required:!0},{pattern:/^[\w\s]{1,66}$/,message:l("rule_alphabets_numbers_spaces")}],initialValue:s==null?void 0:s.residentAddress.street,children:e(O,{placeholder:l("apply_form_please_enter")+l("apply_form_street_name")})}),e(m.Item,{name:["billingAddress","postal"],label:e(i,{id:"apply_form_postal_code"}),rules:[{required:!0},{pattern:/^[a-zA-Z0-9]*$/,message:l("rule_alphabets_numbers")}],initialValue:s==null?void 0:s.residentAddress.postal,normalize:h=>h==null?void 0:h.toUpperCase(),children:e(O,{maxLength:6,placeholder:l("apply_form_please_enter")+l("apply_form_postal_code")})}),e(m.Item,{name:["billingAddress","country"],label:e(i,{id:"apply_form_country"}),rules:[{required:!0}],initialValue:"SINGAPORE",children:e(O,{disabled:!0,placeholder:l("apply_form_please_enter")+l("apply_form_country")})})]})}})]})})]})},We=t=>{if(!t)return"-";if(t.country==="SG")return`${t.block} ${t.street} # ${t.floor}-${t.unit} ${t.building||"-"} ${t.country} (${t.postal})`;if(t!=null&&t.line1)return`${t.line1} ${t==null?void 0:t.line2}`},it=()=>{const t=_e(),s=je(),[n]=m.useForm();Fe();const[u]=ve(),x=ke(),[h,k]=C.useState(),{appliedCardsFlat:o,channelApplyNo:_,myinfoApplyNo:y,applyExtraParms:W,myInfoData:f,jumioInfoData:j}=v(N=>N.cardApply),[S,xe]=C.useState(Number(x.id)),[H,K]=C.useState(!1),[fe,L]=C.useState(!1),[Ne,Q]=C.useState(!1),{userInfo:E,sdkData:c,identityCheckFlag:b,applyPhoneNumberflag:Ze}=v(N=>N.user),ye=()=>J(void 0,null,function*(){const{code:N,state:d,error:p}=Object.fromEntries(u.entries());if(p)return t(-1);if(console.log(">>>>",N,y,H),N&&!y&&!H)try{const F=yield Y("/dcs-apply-online/myinfo/thirdParty/callback/v2",{code:N,state:d});K(!0),s(ne(F.myinfoApplyNo)),yield X(F.myinfoApplyNo)}catch(F){console.log("----------",F),K(!0)}finally{L(!1)}else y&&(yield X(y),L(!1))}),X=N=>J(void 0,null,function*(){var D,ee,te,se,re,ie;N&&s(ne(N)),L(!0),s(de({}));const d=yield Y("/dcs-apply-online/card/apply/login/queryApplicationbyStep/v4",{myinfoApplyNo:N||y,channelApplyNo:_,applicationType:2,cardAndProductList:o});if(L(!1),!d)return;console.log("identityCheckFlag",b);let p=d.appIdType.toUpperCase(),F=d.icNumber.toUpperCase(),V=d.birthDate.toUpperCase(),M=d.gender.toUpperCase(),Z=d.custName.toUpperCase();if((b!=null&&b.includes("idType")||b!=null&&b.includes("idNo"))&&(p!=((D=c==null?void 0:c.idType)==null?void 0:D.toUpperCase())||F!=((ee=c==null?void 0:c.idNo)==null?void 0:ee.toUpperCase()))){q.show(l("user_identities_do_not_match")),console.log("需要交叉验证idtype idNo",p,F,c==null?void 0:c.idType,c==null?void 0:c.idNo),t(-1);return}if(b!=null&&b.includes("birthDate")&&V.replace(/-/g,"")!=((te=c==null?void 0:c.birthDate)==null?void 0:te.toUpperCase())){q.show(l("user_identities_do_not_match")),console.log("需要交叉验证birthDate",V,c==null?void 0:c.birthDate),t(-1);return}if(b!=null&&b.includes("gender")&&M!=((se=c==null?void 0:c.gender)==null?void 0:se.toUpperCase())){q.show(l("user_identities_do_not_match")),console.log("需要交叉验证性别",M,c==null?void 0:c.gender),t(-1);return}if((b!=null&&b.includes("firstName")||b!=null&&b.includes("lastName"))&&!(Z.includes((re=c==null?void 0:c.firstName)==null?void 0:re.toUpperCase())&&Z.includes((ie=c==null?void 0:c.lastName)==null?void 0:ie.toUpperCase()))){q.show(l("user_identities_do_not_match")),console.log("需要交叉验证姓名",Z,c==null?void 0:c.firstName,c==null?void 0:c.lastName),t(-1);return}d!=null&&d.mobile?Q(!0):(Q(!1),d.mobile=(E==null?void 0:E.areaCode)+" "+(E==null?void 0:E.phoneNumber)),d.preCreditLimit=((d==null?void 0:d.preCreditLimit)||0)/100,s(de(d))}),I=C.useCallback(N=>(L(!0),console.log("onFinish",o),Y("/dcs-apply-online/card/apply/login/saveApplication/myinfo/v4",z(P({},be(S,N)),{stepNo:{4:5,5:6}[S]||S,orgCode:E==null?void 0:E.orgCode,channelApplyNo:_,myinfoApplyNo:y,cardAndProductList:o,cardSdkExternalParam:c,pageType:{1:"BASE_INFO",2:"ADDRESS_INFO",3:"WORK_INFO",4:"CARD_PERSONALIZE",5:"CARD_PERSONALIZE",6:"CARD_PERSONALIZE"}[S]})).then(d=>{if(d.applyCardsFlag){k(d.applyCards),L(!1);return}if(k(void 0),s(Ee(d.channelApplyNo)),S===3&&(f==null?void 0:f.isAlien)!=="1"&&(j==null?void 0:j.isSuccess)!=="1"){L(!1),t("/ApplyIDVerification");return}if(S===5)console.log("第五部",j),Y("/dcs-apply-online/card/apply/login/sumbitApplication/v5",z(P({},W),{channelApplyNo:_,myinfoApplyNo:y,applicationType:2,jumioAccountId:j==null?void 0:j.accountId,jumioWorkflowExecutionId:j==null?void 0:j.workflowId})).then(()=>{t("/result-page",{replace:!0})}).finally(()=>{L(!1)});else{L(!1);const{back:p}=Object.fromEntries(u.entries());if(p)return t(-1);t(`/myinfo/${S+1}`)}}).catch(()=>{L(!1)})),[S,y,_,o,f,j]),be=(N,d)=>{var F,V,M;const p=P({},d);return N===1&&(p.cardIssuer="G",p.passportExpiryDate&&(p.passportExpiryDate=Te(d.passexpirydate).format("YYYY-MM-DD")),p.email=p.email.toLocaleUpperCase(),Ne||(p.mobile=f==null?void 0:f.mobile),typeof p.mobile=="object"&&(p.mobile=p.mobile.areaCode+" "+p.mobile.phone)),N===2&&(p.appResidencyCode="SG",(F=d.homePhone)!=null&&F.phone?p.residentAddress=z(P({},f==null?void 0:f.residentAddress),{homePhone:`${(V=d.homePhone)==null?void 0:V.areaCode} ${(M=d.homePhone)==null?void 0:M.phone}`}):p.residentAddress=f==null?void 0:f.residentAddress,p.billingAddress=z(P({},p.billingAddress?p.billingAddress:f==null?void 0:f.residentAddress),{country:(f==null?void 0:f.residentAddress.country)||"SG"}),delete p.homePhone),N===3&&(console.log("selfEmployment",d.selfEmployment),p.selfEmployment=d.selfEmployment?"Y":"N",d.jobSeniorityList&&(p.jobSeniorityList=[d.jobSeniorityList]),d.purposeOfAccountList&&(p.purposeOfAccountList=[d.purposeOfAccountList]),d.sourceOfFundsCountryList&&(p.sourceOfFundsCountryList=[d.sourceOfFundsCountryList])),N===4&&(p.preCreditLimit=(d.preCreditLimit||0)*1e3,p.determineLimitFlag=d.determineLimitFlag||"Y",p.preNameOnCard=d.preNameOnCard.toLocaleUpperCase()),N===5&&(p.pdpaFlag=d.pdpaFlag?"Y":"N",p.usaTaxResident=d.usaTaxResident?"Y":"N",p.dncFlag=d.dncFlag?"Y":"N"),p};return C.useEffect(()=>{try{L(!0),ye()}catch(N){L(!1),t(-1)}xe(Number(x.id))},[x]),r("div",{children:[!f&&e(Pe,{}),r(m,{className:"p-3 mb-10",form:n,onFinish:I,requiredMarkStyle:"text-optional",footer:e(U,{block:!0,type:"submit",color:"primary",size:"large",shape:"rounded",loading:fe,children:e(i,{id:S===5?"common_submit":"common_next"})}),children:[S===1&&e(Me,{}),S===2&&e(Ge,{form:n}),S===3&&e(Ye,{form:n}),S===4&&e(qe,{}),S===5&&e(ze,{})]}),e(Ue,{open:!0,setOpen:()=>null,applyCards:h,onOk:()=>I(n.getFieldsValue(!0))})]})};export{it as default};

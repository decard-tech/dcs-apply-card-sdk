var H=(t,n,e)=>new Promise((r,a)=>{var l=i=>{try{c(e.next(i))}catch(s){a(s)}},m=i=>{try{c(e.throw(i))}catch(s){a(s)}},c=i=>i.done?r(i.value):Promise.resolve(i.value).then(l,m);c((e=e.apply(t,n)).next())});import{r as g,a9 as Z,a5 as d,aT as Q,aU as ee,aV as E,aa as te,a8 as ce,aI as ue,aW as me,a6 as fe,a7 as de,ab as T,a as ne,e as b,g as W,j as A,ad as ge,u as he,K as ve,h as Ne,B as pe,f as ye,ah as be,a4 as Se,Z as Ee}from"./index-6701bc4a.js";import{S as ke}from"./search-bar-8ae064c9.js";import{D as Ce}from"./OTPInputPanel-c703fb99.js";function xe(t){return g.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 49 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},t,{style:Object.assign({verticalAlign:"-0.125em"},t.style),className:["antd-mobile-icon",t.className].filter(Boolean).join(" ")}),g.createElement("g",{id:"InformationCircleOutline-InformationCircleOutline",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},g.createElement("g",{transform:"translate(1.000000, 0.000000)",id:"InformationCircleOutline-编组"},g.createElement("rect",{id:"InformationCircleOutline-矩形",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),g.createElement("path",{d:"M24,2 C36.1502645,2 46,11.8497355 46,24 C46,36.1502645 36.1502645,46 24,46 C11.8497355,46 2,36.1502645 2,24 C2,11.8497355 11.8497355,2 24,2 Z M24,5 C13.5065898,5 5,13.5065898 5,24 C5,34.4934102 13.5065898,43 24,43 C34.4934102,43 43,34.4934102 43,24 C43,13.5065898 34.4934102,5 24,5 Z M25.6,20 C25.8209139,20 26,20.1790861 26,20.4 L26,34.6 C26,34.8209139 25.8209139,35 25.6,35 L23.4,35 C23.1790861,35 23,34.8209139 23,34.6 L23,23 L21.4,23 C21.1790861,23 21,22.8209139 21,22.6 L21,20.4 C21,20.1790861 21.1790861,20 21.4,20 L25.6,20 Z M25.6,14 C25.8209139,14 26,14.1790861 26,14.4 L26,16.6 C26,16.8209139 25.8209139,17 25.6,17 L23.4,17 C23.1790861,17 23,16.8209139 23,16.6 L23,14.4 C23,14.1790861 23.1790861,14 23.4,14 L25.6,14 Z",id:"InformationCircleOutline-形状结合",fill:"currentColor",fillRule:"nonzero"}))))}function Ie(t,n){return t.reduce((e,r)=>Math.abs(e-n)<Math.abs(r-n)?e:r)}const G="adm-slider",we=({points:t,max:n,min:e,upperBound:r,lowerBound:a})=>{const l=n-e,m=t.map(c=>{const i=`${Math.abs(c-e)/l*100}%`,s=c<=r&&c>=a,f={left:i},y=Z({[`${G}-tick`]:!0,[`${G}-tick-active`]:s});return d.createElement("span",{className:y,style:f,key:c})});return d.createElement("div",{className:`${G}-ticks`},m)},_e=we,j="adm-slider-mark",Me=({marks:t,upperBound:n,lowerBound:e,max:r,min:a})=>{const l=Object.keys(t),m=r-a,c=l.map(parseFloat).sort((i,s)=>i-s).filter(i=>i>=a&&i<=r).map(i=>{const s=t[i];if(!s&&s!==0)return null;const f=i<=n&&i>=e,y=Z({[`${j}-text`]:!0,[`${j}-text-active`]:f}),S={left:`${(i-a)/m*100}%`};return d.createElement("span",{className:y,style:S,key:i},s)});return d.createElement("div",{className:j},c)},De=Me;function X(){return typeof BigInt=="function"}function re(t){return!t&&t!==0&&!Number.isNaN(t)||!String(t).trim()}function $(t){var n=t.trim(),e=n.startsWith("-");e&&(n=n.slice(1)),n=n.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,""),n.startsWith(".")&&(n="0".concat(n));var r=n||"0",a=r.split("."),l=a[0]||"0",m=a[1]||"0";l==="0"&&m==="0"&&(e=!1);var c=e?"-":"";return{negative:e,negativeStr:c,trimStr:r,integerStr:l,decimalStr:m,fullStr:"".concat(c).concat(r)}}function z(t){var n=String(t);return!Number.isNaN(Number(n))&&n.includes("e")}function L(t){var n=String(t);if(z(t)){var e=Number(n.slice(n.indexOf("e-")+2)),r=n.match(/\.(\d+)/);return r!=null&&r[1]&&(e+=r[1].length),e}return n.includes(".")&&ie(n)?n.length-n.indexOf(".")-1:0}function ae(t){var n=String(t);if(z(t)){if(t>Number.MAX_SAFE_INTEGER)return String(X()?BigInt(t).toString():Number.MAX_SAFE_INTEGER);if(t<Number.MIN_SAFE_INTEGER)return String(X()?BigInt(t).toString():Number.MIN_SAFE_INTEGER);n=t.toFixed(L(n))}return $(n).fullStr}function ie(t){return typeof t=="number"?!Number.isNaN(t):t?/^\s*-?\d+(\.\d+)?\s*$/.test(t)||/^\s*-?\d+\.\s*$/.test(t)||/^\s*-?\.\d+\s*$/.test(t):!1}var Fe=function(){function t(n){if(ee(this,t),E(this,"origin",""),E(this,"negative",void 0),E(this,"integer",void 0),E(this,"decimal",void 0),E(this,"decimalLen",void 0),E(this,"empty",void 0),E(this,"nan",void 0),re(n)){this.empty=!0;return}if(this.origin=String(n),n==="-"||Number.isNaN(n)){this.nan=!0;return}var e=n;if(z(e)&&(e=Number(e)),e=typeof e=="string"?e:ae(e),ie(e)){var r=$(e);this.negative=r.negative;var a=r.trimStr.split(".");this.integer=BigInt(a[0]);var l=a[1]||"0";this.decimal=BigInt(l),this.decimalLen=l.length}else this.nan=!0}return Q(t,[{key:"getMark",value:function(){return this.negative?"-":""}},{key:"getIntegerStr",value:function(){return this.integer.toString()}},{key:"getDecimalStr",value:function(){return this.decimal.toString().padStart(this.decimalLen,"0")}},{key:"alignDecimal",value:function(e){var r="".concat(this.getMark()).concat(this.getIntegerStr()).concat(this.getDecimalStr().padEnd(e,"0"));return BigInt(r)}},{key:"negate",value:function(){var e=new t(this.toString());return e.negative=!e.negative,e}},{key:"cal",value:function(e,r,a){var l=Math.max(this.getDecimalStr().length,e.getDecimalStr().length),m=this.alignDecimal(l),c=e.alignDecimal(l),i=r(m,c).toString(),s=a(l),f=$(i),y=f.negativeStr,S=f.trimStr,k="".concat(y).concat(S.padStart(s+1,"0"));return new t("".concat(k.slice(0,-s),".").concat(k.slice(-s)))}},{key:"add",value:function(e){if(this.isInvalidate())return new t(e);var r=new t(e);return r.isInvalidate()?this:this.cal(r,function(a,l){return a+l},function(a){return a})}},{key:"multi",value:function(e){var r=new t(e);return this.isInvalidate()||r.isInvalidate()?new t(NaN):this.cal(r,function(a,l){return a*l},function(a){return a*2})}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return this.nan}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(e){return this.toString()===(e==null?void 0:e.toString())}},{key:"lessEquals",value:function(e){return this.add(e.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.isNaN()?NaN:Number(this.toString())}},{key:"toString",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return e?this.isInvalidate()?"":$("".concat(this.getMark()).concat(this.getIntegerStr(),".").concat(this.getDecimalStr())).fullStr:this.origin}}]),t}(),Ae=function(){function t(n){if(ee(this,t),E(this,"origin",""),E(this,"number",void 0),E(this,"empty",void 0),re(n)){this.empty=!0;return}this.origin=String(n),this.number=Number(n)}return Q(t,[{key:"negate",value:function(){return new t(-this.toNumber())}},{key:"add",value:function(e){if(this.isInvalidate())return new t(e);var r=Number(e);if(Number.isNaN(r))return this;var a=this.number+r;if(a>Number.MAX_SAFE_INTEGER)return new t(Number.MAX_SAFE_INTEGER);if(a<Number.MIN_SAFE_INTEGER)return new t(Number.MIN_SAFE_INTEGER);var l=Math.max(L(this.number),L(r));return new t(a.toFixed(l))}},{key:"multi",value:function(e){var r=Number(e);if(this.isInvalidate()||Number.isNaN(r))return new t(NaN);var a=this.number*r;if(a>Number.MAX_SAFE_INTEGER)return new t(Number.MAX_SAFE_INTEGER);if(a<Number.MIN_SAFE_INTEGER)return new t(Number.MIN_SAFE_INTEGER);var l=Math.max(L(this.number),L(r));return new t(a.toFixed(l))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return Number.isNaN(this.number)}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(e){return this.toNumber()===(e==null?void 0:e.toNumber())}},{key:"lessEquals",value:function(e){return this.add(e.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.number}},{key:"toString",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return e?this.isInvalidate()?"":ae(this.number):this.origin}}]),t}();function D(t){return X()?new Fe(t):new Ae(t)}function se(t,n,e){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(t==="")return"";var a=$(t),l=a.negativeStr,m=a.integerStr,c=a.decimalStr,i="".concat(n).concat(c),s="".concat(l).concat(m);if(e>=0){var f=Number(c[e]);if(f>=5&&!r){var y=D(t).add("".concat(l,"0.").concat("0".repeat(e)).concat(10-f));return se(y.toString(),n,e,r)}return e===0?s:"".concat(s).concat(n).concat(c.padEnd(e,"0").slice(0,e))}return i===".0"?s:"".concat(s).concat(i)}const Le=t=>te(t,d.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},d.createElement("g",{fill:"currentColor",fillRule:"evenodd"},d.createElement("rect",{x:10,width:4,height:24,rx:2}),d.createElement("rect",{y:4,width:4,height:16,rx:2}),d.createElement("rect",{x:20,y:4,width:4,height:16,rx:2})))),q="adm-slider",$e=t=>{const{value:n,min:e,max:r,disabled:a,icon:l,residentPopover:m,onDrag:c}=t,i=g.useRef(n),{locale:s}=ce(),f=()=>({left:`${(n-e)/(r-e)*100}%`,right:"auto"}),[y,S]=g.useState(!1),k=ue(h=>{var _;if(a)return;h.first&&(i.current=n);const I=h.xy[0]-h.initial[0],v=(_=t.trackRef.current)===null||_===void 0?void 0:_.offsetWidth;if(!v)return;const P=I/Math.ceil(v)*(r-e);c(i.current+P,h.first,h.last),S(!h.last)},{axis:"x",pointer:{touch:!0}}),x=typeof t.popover=="function"?t.popover:t.popover?h=>h.toString():null,N=d.createElement("div",{className:`${q}-thumb`},l||d.createElement(Le,{className:`${q}-thumb-icon`}));return d.createElement("div",Object.assign({className:`${q}-thumb-container`,style:f()},k(),{role:"slider","aria-label":t["aria-label"]||s.Slider.name,"aria-valuemax":r,"aria-valuemin":e,"aria-valuenow":n,"aria-disabled":a}),x?d.createElement(me,{content:x(n),placement:"top",visible:m||y,getContainer:null,mode:"dark"},N):N)},Pe=$e,F="adm-slider",Re={min:0,max:100,step:1,ticks:!1,range:!1,disabled:!1,popover:!1,residentPopover:!1},Ge=t=>{var n;const e=fe(Re,t),{min:r,max:a,disabled:l,marks:m,ticks:c,step:i,icon:s}=e;function f(o){return o.sort((u,p)=>u-p)}function y(o){return e.range?o:[e.min,o]}function S(o,u){const p=D(o),M=se(p.toString(),".",u);return D(M).toNumber()}function k(o){const u=Math.max(x(i),x(o[0]),x(o[1]));return e.range?o.map(p=>S(p,u)):S(o[1],u)}function x(o){return(`${o}`.split(".")[1]||"").length}function N(o){var u;(u=e.onAfterChange)===null||u===void 0||u.call(e,k(o))}let h=e.value;e.range&&typeof e.value=="number"&&(h=[0,e.value]);const[_,I]=de({value:h,defaultValue:(n=e.defaultValue)!==null&&n!==void 0?n:e.range?[r,r]:r,onChange:e.onChange}),v=f(y(_));function P(o){const u=f(o),p=v;u[0]===p[0]&&u[1]===p[1]||I(k(u))}const R=g.useRef(null),le=`${100*(v[1]-v[0])/(a-r)}%`,oe=`${100*(v[0]-r)/(a-r)}%`,V=g.useMemo(()=>{if(m)return Object.keys(m).map(parseFloat).sort((o,u)=>o-u);if(c){const o=[];for(let u=D(r);u.lessEquals(D(a));u=u.add(i))o.push(u.toNumber());return o}return[]},[m,c,i,r,a]);function Y(o){const u=o<r?r:o>a?a:o;let p=r;if(V.length)p=Ie(V,u);else{const M=Math.round((u-r)/i),C=D(M).multi(i);p=D(r).add(C.toString()).toNumber()}return p}const B=g.useRef(0),U=o=>{if(B.current>0||(o.stopPropagation(),l))return;const u=R.current;if(!u)return;const p=u.getBoundingClientRect().left,M=(o.clientX-p)/Math.ceil(u.offsetWidth)*(a-r)+r,C=Y(M);let w;e.range?Math.abs(C-v[0])>Math.abs(C-v[1])?w=[v[0],C]:w=[C,v[1]]:w=[e.min,C],P(w),N(w)},J=g.useRef(),K=o=>d.createElement(Pe,{key:o,value:v[o],min:r,max:a,disabled:l,trackRef:R,icon:s,popover:e.popover,residentPopover:e.residentPopover,onDrag:(u,p,M)=>{p&&(B.current+=1,J.current=v);const C=Y(u),w=J.current;if(!w)return;const O=[...w];O[o]=C,P(O),M&&(N(O),window.setTimeout(()=>{B.current-=1},100))},"aria-label":e["aria-label"]});return te(e,d.createElement("div",{className:Z(F,{[`${F}-disabled`]:l})},d.createElement("div",{className:`${F}-track-container`,onClick:U},d.createElement("div",{className:`${F}-track`,onClick:U,ref:R},d.createElement("div",{className:`${F}-fill`,style:{width:le,left:oe}}),e.ticks&&d.createElement(_e,{points:V,min:r,max:a,lowerBound:v[0],upperBound:v[1]}),e.range&&K(0),K(1))),m&&d.createElement(De,{min:r,max:a,marks:m,lowerBound:v[0],upperBound:v[1]})))},je=({value:t,onChange:n,dictType:e,placeholder:r,nonSingapore:a})=>{const[l,m]=g.useState(!1),[c,i]=g.useState([]),[s,f]=g.useState([]),y=T(e).filter(N=>N.label!=="SINGAPORE");ne();const S=N=>{n==null||n(N[0])},k=N=>{S(N)};console.log("选择都是啥",s,t);const x=N=>{const h=T(e).filter(I=>I.label.includes(N.toLocaleUpperCase())||I.value.includes(N.toLocaleUpperCase())),_=h.filter(I=>I.label!=="SINGAPORE");i(a?[_]:[h])};return g.useEffect(()=>{i(a?[y]:[T(e)])},[a]),g.useEffect(()=>{console.log("2",t),t&&f([t])},[t]),b(ge,{cancelText:"",title:b(ke,{placeholder:W("apply_form_please_enter"),className:"mr-20",onChange:x}),columns:c,visible:l,onClose:()=>{m(!1)},value:s,defaultValue:t,onConfirm:k,children:N=>{const{label:h}=N[0]||{};return A("div",{className:"adm-input flex justify-between",onClick:()=>m(!0),style:{color:h?"#25435f":"#909daa",display:"flex",justifyContent:"space-between",flexDirection:"row"},children:[h||r||W("apply_form_please_choose"),b(Ce,{color:"#000",fontSize:12})]})}})},qe=t=>{const n=ne(),{appliedCards:e}=he(s=>s.cardApply),[r,a]=g.useState(!1),[l,m]=d.useState(!1),c=g.useMemo(()=>t.applyCards?JSON.parse(JSON.stringify(t.applyCards)).sort(f=>Number(f.applyStatus==="Y"||-1)):[],[t.applyCards]);g.useEffect(()=>(t.applyCards&&t.applyCards.length&&m(!0),()=>{m(!1)}),[t.applyCards]);const i=()=>{if(!c.find(f=>f.applyStatus==="Y")){Se.show(W("apply_no_card"));return}a(!0);const s=c.filter(f=>f.applyStatus==="Y").map(f=>f.channelCreditCardId);n(Ee(e.filter(f=>s.includes(f.channelCreditCardId)))),t.onOk().then(()=>{m(!1)}).finally(()=>{a(!1)})};return b(be,{showCloseButton:!0,visible:l,onMaskClick:()=>{m(!1)},onClose:()=>H(void 0,null,function*(){t.onClose&&(yield t.onClose()),m(!1)}),bodyStyle:{background:"#F6F8FB"},children:A("div",{children:[b(ve,{className:"text-center text-sm font-bold my-3",id:"apply_guide_applying_cards"}),b("div",{style:{overflowY:"scroll",height:"45vh"},children:c.map(s=>A("div",{className:"mb-3 py-5 rounded-md px-5 bg-white mx-3",style:{opacity:s.applyStatus==="N"?.5:1},children:[A("div",{className:"flex items-start",children:[b(Ne,{width:100,src:s.channelCardShowImage,alt:s.channelCardName}),b("p",{className:"ml-4 mt-2 text-md font-bold",children:s.channelCardName})]}),s.reasonMsg&&A("div",{style:{color:"#7F87A4"},className:"flex my-2",children:[b(xe,{className:"mt-1 mr-3",fontSize:18}),b("p",{style:{color:"#FF6262"},className:"text-sm",children:s.reasonMsg})]})]},s.channelCreditCardId))}),b("div",{className:"px-6 my-4",children:b(pe,{color:"primary",block:!0,shape:"rounded",onClick:i,loading:r,children:b(ye,{id:"apply_guide_continue_apply"})})})]})})};export{je as D,qe as F,Ge as S};

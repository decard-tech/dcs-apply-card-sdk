var g=(a,d,i)=>new Promise((h,p)=>{var s=t=>{try{l(i.next(t))}catch(o){p(o)}},u=t=>{try{l(i.throw(t))}catch(o){p(o)}},l=t=>t.done?h(t.value):Promise.resolve(t.value).then(s,u);l((i=i.apply(a,d)).next())});import{b as I,a as R,u as _,r as c,t as b,e,k as F,j as r,f as y,h as A,S as B,K as j,a0 as M,B as E,ah as T,Z as V}from"./index-6964e077.js";import{C as v}from"./index-400527c4.js";const Z=({selCard:a,showVisitor:d,onClose:i})=>{const h=I(),p=R(),{applicationType:s}=_(n=>n.cardApply),[u,l]=c.useState(!0),[t,o]=c.useState(!1),[x,L]=c.useState(!1),[f,C]=c.useState([]),[m,k]=c.useState(),N=c.useCallback(()=>{(a==null?void 0:a.recommend)!==0&&(l(!0),b("/dcs-apply-online/card/apply/login/queryRecommendCard",{applicationType:s,channelCardId:a==null?void 0:a.channelCreditCardId}).then(n=>{k(n)}).finally(()=>{l(!1)}))},[a,d]),S=()=>g(void 0,null,function*(){a&&(p(V([a,...(m||[]).filter(n=>f.includes(n.channelCreditCardId))])),w())}),w=()=>{s===2?(o(!0),b("/dcs-apply-online/myinfo/getAuthoriseUrl/v3",{version:"v2"}).then(n=>{window.location.href=n.requestUrl}).finally(()=>{o(!1)})):s===3?h("/manual/0",{replace:location.pathname.includes("/h5/")}):s===4&&h("/ApplyIDVerification",{replace:location.pathname.includes("/h5/")})};return c.useEffect(()=>{a&&N()},[a]),c.useEffect(()=>{L(d)},[d]),a?r(T,{showCloseButton:!0,closeOnSwipe:!0,visible:x,onMaskClick:()=>{},onClose:()=>{i()},bodyStyle:{borderTopLeftRadius:"8px",borderTopRightRadius:"8px",minHeight:"40vh"},children:[e("h2",{className:"text-center text-base font-bold py-2",children:e(y,{id:"apply_recommend_card"})}),r("div",{style:{height:"70vh",overflowY:"scroll"},children:[e("h3",{className:"font-bold text-base text-center mb-8",children:a.channelCardName}),r("div",{className:"flex w-full justify-center mb-4",children:[e("div",{className:"adm-checkbox adm-checkbox-checked mr-4",children:e("div",{className:"adm-checkbox-icon",children:e("svg",{viewBox:"0 0 40 40",children:e("path",{d:"M31.5541766,15 L28.0892433,15 L28.0892434,15 C27.971052,15 27.8576674,15.044522 27.7740471,15.1239792 L18.2724722,24.1625319 L13.2248725,19.3630279 L13.2248725,19.3630279 C13.1417074,19.2834412 13.0287551,19.2384807 12.9107898,19.2380079 L9.44474455,19.2380079 L9.44474454,19.2380079 C9.19869815,19.2384085 8.99957935,19.4284738 9,19.66253 C9,19.7747587 9.04719253,19.8823283 9.13066188,19.9616418 L17.0907466,27.5338228 C17.4170809,27.8442545 17.8447695,28 18.2713393,28 L18.2980697,28 C18.7168464,27.993643 19.133396,27.8378975 19.4530492,27.5338228 L31.8693384,15.7236361 L31.8693384,15.7236361 C32.0434167,15.5582251 32.0435739,15.2898919 31.8696892,15.1242941 C31.7860402,15.0446329 31.6725052,15 31.5541421,15 L31.5541766,15 Z",fill:"currentColor"})})})}),e(A,{width:186,src:a.channelCardShowImage})]}),r("div",{style:{background:"#F6F8FB",padding:"35px"},children:[u?e(B,{}):r("div",{children:[e(j,{className:"mb-4",id:"apply_recommend_card_tip"}),e(v.Group,{value:f,onChange:n=>{C(n)},children:e(M,{direction:"vertical",block:!0,children:m==null?void 0:m.map(n=>e(v,{value:n.channelCreditCardId,children:r("div",{className:"flex",children:[e("img",{width:100,src:n.channelCardShowImage,alt:n.channelCardName}),e("p",{className:"flex-1 ml-4 text-sm",children:n.channelCardName})]})},n.channelCreditCardId))})})]}),e(E,{onClick:S,loading:t,className:"mt-8",block:!0,color:"primary",shape:"rounded",children:e(y,{id:"apply__apply_now"})})]})]})]}):e(F,{})};export{Z as R};

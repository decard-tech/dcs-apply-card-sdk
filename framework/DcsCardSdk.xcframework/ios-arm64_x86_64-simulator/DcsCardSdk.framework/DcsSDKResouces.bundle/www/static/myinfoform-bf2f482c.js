var Q=(t,n,e)=>new Promise((r,a)=>{var o=s=>{try{c(e.next(s))}catch(l){a(l)}},i=s=>{try{c(e.throw(s))}catch(l){a(l)}},c=s=>s.done?r(s.value):Promise.resolve(s.value).then(o,i);c((e=e.apply(t,n)).next())});import{r as p,a9 as Y,a5 as v,aT as ee,aU as te,aV as C,aa as ne,a8 as fe,aI as me,aW as ge,a6 as he,a7 as pe,ab as P,a as re,e as h,g as q,j as k,ad as ve,aO as Ne,B as W,ah as ae,k as be,u as ye,K as xe,h as Se,f as Ee,a4 as ke,Z as Ce}from"./index-6964e077.js";import{S as we}from"./search-bar-18f27248.js";import{D as ie}from"./OTPInputPanel-6dedce77.js";function Ie(t){return p.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 49 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},t,{style:Object.assign({verticalAlign:"-0.125em"},t.style),className:["antd-mobile-icon",t.className].filter(Boolean).join(" ")}),p.createElement("g",{id:"InformationCircleOutline-InformationCircleOutline",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},p.createElement("g",{transform:"translate(1.000000, 0.000000)",id:"InformationCircleOutline-编组"},p.createElement("rect",{id:"InformationCircleOutline-矩形",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),p.createElement("path",{d:"M24,2 C36.1502645,2 46,11.8497355 46,24 C46,36.1502645 36.1502645,46 24,46 C11.8497355,46 2,36.1502645 2,24 C2,11.8497355 11.8497355,2 24,2 Z M24,5 C13.5065898,5 5,13.5065898 5,24 C5,34.4934102 13.5065898,43 24,43 C34.4934102,43 43,34.4934102 43,24 C43,13.5065898 34.4934102,5 24,5 Z M25.6,20 C25.8209139,20 26,20.1790861 26,20.4 L26,34.6 C26,34.8209139 25.8209139,35 25.6,35 L23.4,35 C23.1790861,35 23,34.8209139 23,34.6 L23,23 L21.4,23 C21.1790861,23 21,22.8209139 21,22.6 L21,20.4 C21,20.1790861 21.1790861,20 21.4,20 L25.6,20 Z M25.6,14 C25.8209139,14 26,14.1790861 26,14.4 L26,16.6 C26,16.8209139 25.8209139,17 25.6,17 L23.4,17 C23.1790861,17 23,16.8209139 23,16.6 L23,14.4 C23,14.1790861 23.1790861,14 23.4,14 L25.6,14 Z",id:"InformationCircleOutline-形状结合",fill:"currentColor",fillRule:"nonzero"}))))}function _e(t,n){return t.reduce((e,r)=>Math.abs(e-n)<Math.abs(r-n)?e:r)}const G="adm-slider",Fe=({points:t,max:n,min:e,upperBound:r,lowerBound:a})=>{const o=n-e,i=t.map(c=>{const s=`${Math.abs(c-e)/o*100}%`,l=c<=r&&c>=a,f={left:s},x=Y({[`${G}-tick`]:!0,[`${G}-tick-active`]:l});return v.createElement("span",{className:x,style:f,key:c})});return v.createElement("div",{className:`${G}-ticks`},i)},Me=Fe,j="adm-slider-mark",De=({marks:t,upperBound:n,lowerBound:e,max:r,min:a})=>{const o=Object.keys(t),i=r-a,c=o.map(parseFloat).sort((s,l)=>s-l).filter(s=>s>=a&&s<=r).map(s=>{const l=t[s];if(!l&&l!==0)return null;const f=s<=n&&s>=e,x=Y({[`${j}-text`]:!0,[`${j}-text-active`]:f}),E={left:`${(s-a)/i*100}%`};return v.createElement("span",{className:x,style:E,key:s},l)});return v.createElement("div",{className:j},c)},Ae=De;function X(){return typeof BigInt=="function"}function se(t){return!t&&t!==0&&!Number.isNaN(t)||!String(t).trim()}function L(t){var n=t.trim(),e=n.startsWith("-");e&&(n=n.slice(1)),n=n.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,""),n.startsWith(".")&&(n="0".concat(n));var r=n||"0",a=r.split("."),o=a[0]||"0",i=a[1]||"0";o==="0"&&i==="0"&&(e=!1);var c=e?"-":"";return{negative:e,negativeStr:c,trimStr:r,integerStr:o,decimalStr:i,fullStr:"".concat(c).concat(r)}}function Z(t){var n=String(t);return!Number.isNaN(Number(n))&&n.includes("e")}function R(t){var n=String(t);if(Z(t)){var e=Number(n.slice(n.indexOf("e-")+2)),r=n.match(/\.(\d+)/);return r!=null&&r[1]&&(e+=r[1].length),e}return n.includes(".")&&oe(n)?n.length-n.indexOf(".")-1:0}function le(t){var n=String(t);if(Z(t)){if(t>Number.MAX_SAFE_INTEGER)return String(X()?BigInt(t).toString():Number.MAX_SAFE_INTEGER);if(t<Number.MIN_SAFE_INTEGER)return String(X()?BigInt(t).toString():Number.MIN_SAFE_INTEGER);n=t.toFixed(R(n))}return L(n).fullStr}function oe(t){return typeof t=="number"?!Number.isNaN(t):t?/^\s*-?\d+(\.\d+)?\s*$/.test(t)||/^\s*-?\d+\.\s*$/.test(t)||/^\s*-?\.\d+\s*$/.test(t):!1}var Re=function(){function t(n){if(te(this,t),C(this,"origin",""),C(this,"negative",void 0),C(this,"integer",void 0),C(this,"decimal",void 0),C(this,"decimalLen",void 0),C(this,"empty",void 0),C(this,"nan",void 0),se(n)){this.empty=!0;return}if(this.origin=String(n),n==="-"||Number.isNaN(n)){this.nan=!0;return}var e=n;if(Z(e)&&(e=Number(e)),e=typeof e=="string"?e:le(e),oe(e)){var r=L(e);this.negative=r.negative;var a=r.trimStr.split(".");this.integer=BigInt(a[0]);var o=a[1]||"0";this.decimal=BigInt(o),this.decimalLen=o.length}else this.nan=!0}return ee(t,[{key:"getMark",value:function(){return this.negative?"-":""}},{key:"getIntegerStr",value:function(){return this.integer.toString()}},{key:"getDecimalStr",value:function(){return this.decimal.toString().padStart(this.decimalLen,"0")}},{key:"alignDecimal",value:function(e){var r="".concat(this.getMark()).concat(this.getIntegerStr()).concat(this.getDecimalStr().padEnd(e,"0"));return BigInt(r)}},{key:"negate",value:function(){var e=new t(this.toString());return e.negative=!e.negative,e}},{key:"cal",value:function(e,r,a){var o=Math.max(this.getDecimalStr().length,e.getDecimalStr().length),i=this.alignDecimal(o),c=e.alignDecimal(o),s=r(i,c).toString(),l=a(o),f=L(s),x=f.negativeStr,E=f.trimStr,m="".concat(x).concat(E.padStart(l+1,"0"));return new t("".concat(m.slice(0,-l),".").concat(m.slice(-l)))}},{key:"add",value:function(e){if(this.isInvalidate())return new t(e);var r=new t(e);return r.isInvalidate()?this:this.cal(r,function(a,o){return a+o},function(a){return a})}},{key:"multi",value:function(e){var r=new t(e);return this.isInvalidate()||r.isInvalidate()?new t(NaN):this.cal(r,function(a,o){return a*o},function(a){return a*2})}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return this.nan}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(e){return this.toString()===(e==null?void 0:e.toString())}},{key:"lessEquals",value:function(e){return this.add(e.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.isNaN()?NaN:Number(this.toString())}},{key:"toString",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return e?this.isInvalidate()?"":L("".concat(this.getMark()).concat(this.getIntegerStr(),".").concat(this.getDecimalStr())).fullStr:this.origin}}]),t}(),Le=function(){function t(n){if(te(this,t),C(this,"origin",""),C(this,"number",void 0),C(this,"empty",void 0),se(n)){this.empty=!0;return}this.origin=String(n),this.number=Number(n)}return ee(t,[{key:"negate",value:function(){return new t(-this.toNumber())}},{key:"add",value:function(e){if(this.isInvalidate())return new t(e);var r=Number(e);if(Number.isNaN(r))return this;var a=this.number+r;if(a>Number.MAX_SAFE_INTEGER)return new t(Number.MAX_SAFE_INTEGER);if(a<Number.MIN_SAFE_INTEGER)return new t(Number.MIN_SAFE_INTEGER);var o=Math.max(R(this.number),R(r));return new t(a.toFixed(o))}},{key:"multi",value:function(e){var r=Number(e);if(this.isInvalidate()||Number.isNaN(r))return new t(NaN);var a=this.number*r;if(a>Number.MAX_SAFE_INTEGER)return new t(Number.MAX_SAFE_INTEGER);if(a<Number.MIN_SAFE_INTEGER)return new t(Number.MIN_SAFE_INTEGER);var o=Math.max(R(this.number),R(r));return new t(a.toFixed(o))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return Number.isNaN(this.number)}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(e){return this.toNumber()===(e==null?void 0:e.toNumber())}},{key:"lessEquals",value:function(e){return this.add(e.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.number}},{key:"toString",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return e?this.isInvalidate()?"":le(this.number):this.origin}}]),t}();function D(t){return X()?new Re(t):new Le(t)}function ce(t,n,e){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(t==="")return"";var a=L(t),o=a.negativeStr,i=a.integerStr,c=a.decimalStr,s="".concat(n).concat(c),l="".concat(o).concat(i);if(e>=0){var f=Number(c[e]);if(f>=5&&!r){var x=D(t).add("".concat(o,"0.").concat("0".repeat(e)).concat(10-f));return ce(x.toString(),n,e,r)}return e===0?l:"".concat(l).concat(n).concat(c.padEnd(e,"0").slice(0,e))}return s===".0"?l:"".concat(l).concat(s)}const Be=t=>ne(t,v.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},v.createElement("g",{fill:"currentColor",fillRule:"evenodd"},v.createElement("rect",{x:10,width:4,height:24,rx:2}),v.createElement("rect",{y:4,width:4,height:16,rx:2}),v.createElement("rect",{x:20,y:4,width:4,height:16,rx:2})))),z="adm-slider",Pe=t=>{const{value:n,min:e,max:r,disabled:a,icon:o,residentPopover:i,onDrag:c}=t,s=p.useRef(n),{locale:l}=fe(),f=()=>({left:`${(n-e)/(r-e)*100}%`,right:"auto"}),[x,E]=p.useState(!1),m=me(N=>{var F;if(a)return;N.first&&(s.current=n);const I=N.xy[0]-N.initial[0],b=(F=t.trackRef.current)===null||F===void 0?void 0:F.offsetWidth;if(!b)return;const B=I/Math.ceil(b)*(r-e);c(s.current+B,N.first,N.last),E(!N.last)},{axis:"x",pointer:{touch:!0}}),S=typeof t.popover=="function"?t.popover:t.popover?N=>N.toString():null,g=v.createElement("div",{className:`${z}-thumb`},o||v.createElement(Be,{className:`${z}-thumb-icon`}));return v.createElement("div",Object.assign({className:`${z}-thumb-container`,style:f()},m(),{role:"slider","aria-label":t["aria-label"]||l.Slider.name,"aria-valuemax":r,"aria-valuemin":e,"aria-valuenow":n,"aria-disabled":a}),S?v.createElement(ge,{content:S(n),placement:"top",visible:i||x,getContainer:null,mode:"dark"},g):g)},$e=Pe,A="adm-slider",Te={min:0,max:100,step:1,ticks:!1,range:!1,disabled:!1,popover:!1,residentPopover:!1},ze=t=>{var n;const e=he(Te,t),{min:r,max:a,disabled:o,marks:i,ticks:c,step:s,icon:l}=e;function f(u){return u.sort((d,y)=>d-y)}function x(u){return e.range?u:[e.min,u]}function E(u,d){const y=D(u),M=ce(y.toString(),".",d);return D(M).toNumber()}function m(u){const d=Math.max(S(s),S(u[0]),S(u[1]));return e.range?u.map(y=>E(y,d)):E(u[1],d)}function S(u){return(`${u}`.split(".")[1]||"").length}function g(u){var d;(d=e.onAfterChange)===null||d===void 0||d.call(e,m(u))}let N=e.value;e.range&&typeof e.value=="number"&&(N=[0,e.value]);const[F,I]=pe({value:N,defaultValue:(n=e.defaultValue)!==null&&n!==void 0?n:e.range?[r,r]:r,onChange:e.onChange}),b=f(x(F));function B(u){const d=f(u),y=b;d[0]===y[0]&&d[1]===y[1]||I(m(d))}const $=p.useRef(null),ue=`${100*(b[1]-b[0])/(a-r)}%`,de=`${100*(b[0]-r)/(a-r)}%`,T=p.useMemo(()=>{if(i)return Object.keys(i).map(parseFloat).sort((u,d)=>u-d);if(c){const u=[];for(let d=D(r);d.lessEquals(D(a));d=d.add(s))u.push(d.toNumber());return u}return[]},[i,c,s,r,a]);function U(u){const d=u<r?r:u>a?a:u;let y=r;if(T.length)y=_e(T,d);else{const M=Math.round((d-r)/s),w=D(M).multi(s);y=D(r).add(w.toString()).toNumber()}return y}const V=p.useRef(0),H=u=>{if(V.current>0||(u.stopPropagation(),o))return;const d=$.current;if(!d)return;const y=d.getBoundingClientRect().left,M=(u.clientX-y)/Math.ceil(d.offsetWidth)*(a-r)+r,w=U(M);let _;e.range?Math.abs(w-b[0])>Math.abs(w-b[1])?_=[b[0],w]:_=[w,b[1]]:_=[e.min,w],B(_),g(_)},J=p.useRef(),K=u=>v.createElement($e,{key:u,value:b[u],min:r,max:a,disabled:o,trackRef:$,icon:l,popover:e.popover,residentPopover:e.residentPopover,onDrag:(d,y,M)=>{y&&(V.current+=1,J.current=b);const w=U(d),_=J.current;if(!_)return;const O=[..._];O[u]=w,B(O),M&&(g(O),window.setTimeout(()=>{V.current-=1},100))},"aria-label":e["aria-label"]});return ne(e,v.createElement("div",{className:Y(A,{[`${A}-disabled`]:o})},v.createElement("div",{className:`${A}-track-container`,onClick:H},v.createElement("div",{className:`${A}-track`,onClick:H,ref:$},v.createElement("div",{className:`${A}-fill`,style:{width:ue,left:de}}),e.ticks&&v.createElement(Me,{points:T,min:r,max:a,lowerBound:b[0],upperBound:b[1]}),e.range&&K(0),K(1))),i&&v.createElement(Ae,{min:r,max:a,marks:i,lowerBound:b[0],upperBound:b[1]})))},qe=({value:t,onChange:n,dictType:e,placeholder:r,nonSingapore:a})=>{const[o,i]=p.useState(!1),[c,s]=p.useState([]),[l,f]=p.useState([]),x=P(e).filter(g=>g.label!=="SINGAPORE");re();const E=g=>{n==null||n(g[0])},m=g=>{E(g)};console.log("选择都是啥",l,t);const S=g=>{const N=P(e).filter(I=>I.label.includes(g.toLocaleUpperCase())||I.value.includes(g.toLocaleUpperCase())),F=N.filter(I=>I.label!=="SINGAPORE");s(a?[F]:[N])};return p.useEffect(()=>{s(a?[x]:[P(e)])},[a]),p.useEffect(()=>{console.log("2",t),t&&f([t])},[t]),h(ve,{cancelText:"",title:h(we,{placeholder:q("apply_form_please_enter"),className:"mr-20",onChange:S}),columns:c,visible:o,onClose:()=>{i(!1)},value:l,defaultValue:t,onConfirm:m,children:g=>{const{label:N}=g[0]||{};return k("div",{className:"adm-input flex justify-between",onClick:()=>i(!0),style:{color:N?"#25435f":"#909daa",display:"flex",justifyContent:"space-between",flexDirection:"row"},children:[N||r||q("apply_form_please_choose"),h(ie,{color:"#000",fontSize:12})]})}})},We=({value:t,onChange:n,dictType:e,placeholder:r})=>{const[a,o]=p.useState(!1),[i,c]=p.useState(t),s=P(e);p.useEffect(()=>{c(t)},[t]);const l=()=>{n==null||n(i),o(!1)},f=()=>{c(t),o(!1)},x=m=>{console.log("handleToggleOption",m),console.log("selectedValues",i);const S=i?i.includes(m)?i.filter(g=>g!==m):[...i,m]:[m];c(S)},E=(m,S)=>{S.stopPropagation();const g=i?i.filter(N=>N!==m):[];c(g),n==null||n(g)};return k(be,{children:[k("div",{className:"adm-input flex justify-start relative",onClick:()=>o(!0),style:{display:"flex",flexWrap:"wrap",alignItems:"center",gap:"8px",color:i&&i.length?"#25435f":"#909daa",backgroundColor:"#f6f8fb",padding:"11px 32px 11px 12px",borderRadius:"6px",minHeight:"48px"},children:[i&&i.length>0?i.map(m=>{const S=s.find(g=>g.value===m);return S?k("div",{className:"inline-flex items-center",style:{background:"transparent",border:"1px solid rgba(79, 88, 103, 0.40)",borderRadius:"6px",padding:"1px 8px",gap:"4px"},children:[h("span",{style:{fontSize:"14px",color:"#25435F"},children:S.label}),h(Ne,{style:{fontSize:"14px",color:"#6B7280"},onClick:g=>E(m,g)})]},m):null}):h("div",{children:r||"请选择"}),h(ie,{color:"#000",fontSize:12,style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)"}})]}),h(ae,{visible:a,onMaskClick:f,bodyStyle:{borderTopLeftRadius:"8px",borderTopRightRadius:"8px",maxHeight:"80vh",paddingBottom:"env(safe-area-inset-bottom)"},children:k("div",{style:{padding:"20px 0 0 0"},children:[h("div",{style:{marginBottom:"16px"},children:s.map(m=>k("div",{className:"flex items-center cursor-pointer",onClick:()=>x(m.value),style:{padding:"12px 20px"},children:[h("div",{style:{width:"16px",height:"16px",border:i&&i.includes(m.value)?"1px solid #3366FF":"1px solid #25435F",borderRadius:"2px",marginRight:"12px",display:"flex",alignItems:"center",justifyContent:"center",background:i&&i.includes(m.value)?"#3366FF":"transparent"},children:i&&i.includes(m.value)&&h("span",{style:{color:"#fff",fontSize:"14px"},children:"✓"})}),h("span",{style:{fontSize:"16px",color:"#25435F"},children:m.label})]},m.value))}),k("div",{className:"flex",style:{borderTop:"1px solid #E5E7EB",alignItems:"center"},children:[h(W,{block:!0,onClick:f,style:{flex:1,height:"60px",color:"#000",fontSize:"16px",background:"#fff",border:"0px"},children:"取消"}),h("div",{style:{width:"1px",height:"20px",background:"#E5E7EB"}}),h(W,{block:!0,onClick:l,style:{flex:1,height:"60px",color:"#3366ff",fontSize:"16px",background:"#fff",border:"0px"},children:"确认"})]})]})})]})},Xe=t=>{const n=re(),{appliedCards:e}=ye(l=>l.cardApply),[r,a]=p.useState(!1),[o,i]=v.useState(!1),c=p.useMemo(()=>t.applyCards?JSON.parse(JSON.stringify(t.applyCards)).sort(f=>Number(f.applyStatus==="Y"||-1)):[],[t.applyCards]);p.useEffect(()=>(t.applyCards&&t.applyCards.length&&i(!0),()=>{i(!1)}),[t.applyCards]);const s=()=>{if(!c.find(f=>f.applyStatus==="Y")){ke.show(q("apply_no_card"));return}a(!0);const l=c.filter(f=>f.applyStatus==="Y").map(f=>f.channelCreditCardId);n(Ce(e.filter(f=>l.includes(f.channelCreditCardId)))),t.onOk().then(()=>{i(!1)}).finally(()=>{a(!1)})};return h(ae,{showCloseButton:!0,visible:o,onMaskClick:()=>{i(!1)},onClose:()=>Q(void 0,null,function*(){t.onClose&&(yield t.onClose()),i(!1)}),bodyStyle:{background:"#F6F8FB"},children:k("div",{children:[h(xe,{className:"text-center text-sm font-bold my-3",id:"apply_guide_applying_cards"}),h("div",{style:{overflowY:"scroll",height:"45vh"},children:c.map(l=>k("div",{className:"mb-3 py-5 rounded-md px-5 bg-white mx-3",style:{opacity:l.applyStatus==="N"?.5:1},children:[k("div",{className:"flex items-start",children:[h(Se,{width:100,src:l.channelCardShowImage,alt:l.channelCardName}),h("p",{className:"ml-4 mt-2 text-md font-bold",children:l.channelCardName})]}),l.reasonMsg&&k("div",{style:{color:"#7F87A4"},className:"flex my-2",children:[h(Ie,{className:"mt-1 mr-3",fontSize:18}),h("p",{style:{color:"#FF6262"},className:"text-sm",children:l.reasonMsg})]})]},l.channelCreditCardId))}),h("div",{className:"px-6 my-4",children:h(W,{color:"primary",block:!0,shape:"rounded",onClick:s,loading:r,children:h(Ee,{id:"apply_guide_continue_apply"})})})]})})};export{qe as D,Xe as F,We as M,ze as S};

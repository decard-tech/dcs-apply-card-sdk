import{aa as b,a5 as n,B as k,a9 as s,a6 as f,h,bN as C,a0 as p,aR as m,bO as N,aM as O,bP as y,az as E}from"./index-6701bc4a.js";const x=o=>{const{action:e}=o;return b(o.action,n.createElement(k,{key:e.key,onClick:o.onAction,className:s("adm-modal-button",{"adm-modal-button-primary":o.action.primary}),fill:o.action.primary?"solid":"none",size:o.action.primary?"large":"middle",block:!0,color:e.danger?"danger":"primary",loading:"auto",disabled:e.disabled},e.text))},P={actions:[],closeOnAction:!1,closeOnMaskClick:!1,getContainer:null},g=o=>{const e=f(P,o),t=n.createElement(n.Fragment,null,!!e.image&&n.createElement("div",{className:c("image-container")},n.createElement(h,{src:e.image,alt:"modal header image",width:"100%"})),!!e.header&&n.createElement("div",{className:c("header")},n.createElement(C,null,e.header)),!!e.title&&n.createElement("div",{className:c("title")},e.title),n.createElement("div",{className:c("content")},typeof e.content=="string"?n.createElement(C,null,e.content):e.content),n.createElement(p,{direction:"vertical",block:!0,className:s(c("footer"),e.actions.length===0&&c("footer-empty"))},e.actions.map((l,a)=>n.createElement(x,{key:l.key,action:l,onAction:()=>m(void 0,void 0,void 0,function*(){var i,r,d;yield Promise.all([(i=l.onClick)===null||i===void 0?void 0:i.call(l),(r=e.onAction)===null||r===void 0?void 0:r.call(e,l,a)]),e.closeOnAction&&((d=e.onClose)===null||d===void 0||d.call(e))})}))));return n.createElement(N,{className:s(c(),e.className),style:e.style,afterClose:e.afterClose,afterShow:e.afterShow,showCloseButton:e.showCloseButton,closeOnMaskClick:e.closeOnMaskClick,onClose:e.onClose,visible:e.visible,getContainer:e.getContainer,bodyStyle:e.bodyStyle,bodyClassName:s(c("body"),e.image&&c("with-image"),e.bodyClassName),maskStyle:e.maskStyle,maskClassName:e.maskClassName,stopPropagation:e.stopPropagation,disableBodyScroll:e.disableBodyScroll,destroyOnClose:e.destroyOnClose,forceRender:e.forceRender},t)};function c(o=""){return"adm-modal"+(o&&"-")+o}const u=new Set;function v(o){const e=O(n.createElement(g,Object.assign({},o,{afterClose:()=>{var t;u.delete(e.close),(t=o.afterClose)===null||t===void 0||t.call(o)}})));return u.add(e.close),e}function w(o){const e={confirmText:y().locale.Modal.ok},t=f(e,o);return new Promise(l=>{v(Object.assign(Object.assign({},t),{closeOnAction:!0,actions:[{key:"confirm",text:t.confirmText,primary:!0}],onAction:t.onConfirm,onClose:()=>{var a;(a=t.onClose)===null||a===void 0||a.call(t),l()}}))})}const S={confirmText:"确认",cancelText:"取消"};function A(o){const{locale:e}=y(),t=f(S,{confirmText:e.common.confirm,cancelText:e.common.cancel},o);return new Promise(l=>{v(Object.assign(Object.assign({},t),{closeOnAction:!0,onClose:()=>{var a;(a=t.onClose)===null||a===void 0||a.call(t),l(!1)},actions:[{key:"confirm",text:t.confirmText,primary:!0,onClick:()=>m(this,void 0,void 0,function*(){var a;yield(a=t.onConfirm)===null||a===void 0?void 0:a.call(t),l(!0)})},{key:"cancel",text:t.cancelText,onClick:()=>m(this,void 0,void 0,function*(){var a;yield(a=t.onCancel)===null||a===void 0?void 0:a.call(t),l(!1)})}]}))})}function _(){u.forEach(o=>{o()})}const T=E(g,{show:v,alert:w,confirm:A,clear:_});export{T as M};

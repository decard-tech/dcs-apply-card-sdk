var we=Object.defineProperty,ve=Object.defineProperties;var Fe=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var se=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable;var ie=(t,r,i)=>r in t?we(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i,V=(t,r)=>{for(var i in r||(r={}))se.call(r,i)&&ie(t,i,r[i]);if(U)for(var i of U(r))ne.call(r,i)&&ie(t,i,r[i]);return t},oe=(t,r)=>ve(t,Fe(r));var de=(t,r)=>{var i={};for(var d in t)se.call(t,d)&&r.indexOf(d)<0&&(i[d]=t[d]);if(t!=null&&U)for(var d of U(t))r.indexOf(d)<0&&ne.call(t,d)&&(i[d]=t[d]);return i};var Q=(t,r,i)=>new Promise((d,m)=>{var h=p=>{try{n(i.next(p))}catch(u){m(u)}},x=p=>{try{n(i.throw(p))}catch(u){m(u)}},n=p=>p.done?d(p.value):Promise.resolve(p.value).then(h,x);n((i=i.apply(t,r)).next())});import{r as g,a5 as I,a6 as Ie,a7 as Ae,a8 as Se,a9 as ke,aa as Te,a0 as C,e,ab as Z,u as S,a as ue,j as a,f as s,g as l,I as b,F as o,p as ee,J as M,ac as _e,k as v,K as c,b as he,B as j,a1 as $,a3 as pe,ad as $e,h as Ee,O as Pe,M as Ve,$ as je,t as Y,R as qe}from"./index-6701bc4a.js";import{S as Le}from"./index-9f281666.js";import{S as D}from"./index-ba23ef6c.js";import{M as Oe,D as Ye,O as De}from"./OTPInputPanel-c703fb99.js";import{D as R,S as Me,F as Re}from"./myinfoform-ac8901f5.js";import{C as A}from"./card-0f9563e7.js";import{D as te}from"./index-5411defb.js";import{T as B}from"./index-179a4cbf.js";import{G as ze,T as ce,U as E}from"./Upload-1764b96d.js";import{C as H}from"./index-87da04c9.js";import{R as q}from"./index-c76bae8d.js";import"./search-bar-8ae064c9.js";import"./index-1965719a.js";import"./ResizeObserver.es-b51b3958.js";import"./native-input-f54745c8.js";const Ge=(t={})=>g.useMemo(()=>{const{label:i="label",value:d="value",disabled:m="disabled",children:h="children"}=t;return[i,d,h,m]},[JSON.stringify(t)]);const Ue=g.memo(()=>I.createElement("svg",{width:"17px",height:"13px",viewBox:"0 0 17 13",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},I.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"},I.createElement("g",{transform:"translate(-2832.000000, -1103.000000)",stroke:"#FFFFFF",strokeWidth:"3"},I.createElement("g",{transform:"translate(2610.000000, 955.000000)"},I.createElement("g",{transform:"translate(24.000000, 91.000000)"},I.createElement("g",{transform:"translate(179.177408, 36.687816)"},I.createElement("polyline",{points:"34.2767388 22 24.797043 31.4796958 21 27.6826527"})))))))),P="adm-selector",Be={multiple:!1,defaultValue:[],showCheckMark:!0},Ze=t=>{const r=Ie(Be,t),[i,d,,m]=Ge(r.fieldNames),[h,x]=Ae({value:r.value,defaultValue:r.defaultValue,onChange:u=>{var N;const w={get items(){return r.options.filter(L=>u.includes(L[d]))}};(N=r.onChange)===null||N===void 0||N.call(r,u,w)}}),{locale:n}=Se(),p=r.options.map(u=>{const N=(h||[]).includes(u[d]),w=u[m]||r.disabled,L=ke(`${P}-item`,{[`${P}-item-active`]:N&&!r.multiple,[`${P}-item-multiple-active`]:N&&r.multiple,[`${P}-item-disabled`]:w});return I.createElement("div",{key:u[d],className:L,onClick:()=>{if(!w)if(r.multiple){const O=N?h.filter(z=>z!==u[d]):[...h,u[d]];x(O)}else{const O=N?[]:[u[d]];x(O)}},role:"option","aria-selected":N&&!r.multiple||N&&r.multiple},u[i],u.description&&I.createElement("div",{className:`${P}-item-description`},u.description),N&&r.showCheckMark&&I.createElement("div",{className:`${P}-check-mark-wrapper`},I.createElement(Ue,null)))});return Te(r,I.createElement("div",{className:P,role:"listbox","aria-label":n.Selector.name},r.columns?I.createElement(ze,{columns:r.columns},p):I.createElement(C,{wrap:!0},p)))},X=d=>{var m=d,{value:t,onChange:r}=m,i=de(m,["value","onChange"]);const[h,x]=g.useState(),n=u=>{r==null||r(u)},p=u=>{n(u[0])};return g.useEffect(()=>{t&&x([t])},[t]),e(Ze,V({style:{"--border-radius":"100px","--border":"solid transparent 1px","--checked-border":"solid var(--adm-color-primary) 1px","--padding":"6px 20px"},options:Z("GENDER"),value:h,onChange:p},i))},He=g.memo(()=>{var h,x;const{userMobile:t}=S(n=>n.app),{manualData:r,appliedCards:i}=S(n=>n.cardApply),d=ue(),m=g.useMemo(()=>{var n;return i[0]&&((n=i[0].productList[0])==null?void 0:n.tenCardsFlag)},[i]);return console.log("manualData",r),r?a(A,{title:e(s,{id:"apply_form_personal_info"}),className:"p-0 rounded-lg text-xs",headerClassName:"px-5",children:[a(C,{direction:"vertical",block:!0,className:"p-5 shadow-lg rounded-lg",children:[e(o.Item,{name:"custName",label:e(s,{id:"apply_upgrade_full_name"}),help:l("apply_upgrade_full_name_sub"),rules:[{required:!0},{pattern:/^[A-Za-z-_ ]*$/,message:l("rule_alphabets_spaces_hyphens")}],initialValue:r.custName,children:e(b,{maxLength:66,placeholder:l("apply_form_please_enter")+l("apply_upgrade_full_name")})}),e(o.Item,{name:"gender",label:e(s,{id:"apply_form_gender"}),rules:[{required:!0}],initialValue:r.gender,normalize:n=>n[0],children:e(X,{options:Z("GENDER")})}),e(o.Item,{name:"birthDate",label:e(s,{id:"apply_form_date_of_birth"}),trigger:"onConfirm",onClick:(n,p)=>{var u;(u=p.current)==null||u.open()},rules:[{required:!0}],initialValue:r.birthDate?new Date(r.birthDate):void 0,children:e(te,{min:ee().subtract(100,"year").toDate(),max:new Date,children:n=>e("div",{className:`adm-input ${n?"text-default":"text-minor"}`,children:n?e(M,{value:n}):l("apply_form_please_enter")+l("apply_form_date_of_birth")})})}),!m&&e(o.Item,{name:"maritalStatus",label:e(s,{id:"apply_form_maritial_status"}),rules:[{required:!0}],initialValue:r.maritalStatus,normalize:n=>n[0],children:e(X,{columns:4,options:Z("MARITAL_STATUS")})})]}),a("div",{style:{background:"rgb(246, 248, 251)"},children:[e(c,{id:"apply_upgrade_residence_status",className:"ml-3 pt-5 pb-3"}),a(B,{className:"bg-white cust-tab",onChange:n=>{console.log("onChangeonChangeonChange",n),d(_e({residentialStatus:n}))},defaultActiveKey:r.residentialStatus,children:[e(B.Tab,{title:l("apply_form_singaporean")},"C"),e(B.Tab,{title:l("apply_guide_singapore_pr")},"P"),e(B.Tab,{title:l("apply_form_race_others")},"A")]})]}),a(C,{direction:"vertical",block:!0,className:"px-5 pb-5 bg-white shadow-lg rounded-lg",children:[["C","P"].includes(r.residentialStatus||"")&&e(v,{children:e(o.Item,{name:"icNumber",label:e(s,{id:"apply_upgrade_NRIC"}),rules:[{required:!0},{pattern:/^[a-zA-Z0-9]*$/,message:l("rule_alphabets_numbers")}],initialValue:r.icNumber,children:e(b,{maxLength:66,placeholder:l("apply_form_please_enter")+l("apply_upgrade_NRIC")})})}),["P","A"].includes(r.residentialStatus||"")&&e(o.Item,{name:"nationality",label:e(s,{id:"apply_form_nationality"}),rules:[{required:!0}],initialValue:r.nationality,normalize:n=>n[0],children:e(R,{dictType:"COUNTRY_CODE_ISO2"})}),["A"].includes(r.residentialStatus||"")&&a(v,{children:[e(o.Item,{name:"passport",label:e(s,{id:"apply_form_passport_num"}),rules:[{required:!0},{pattern:/^[a-zA-Z0-9]*$/,message:l("rule_alphabets_numbers")}],initialValue:r.passport,children:e(b,{maxLength:25,placeholder:l("apply_form_please_enter")+l("apply_upgrade_NRIC")})}),e(o.Item,{name:"passportExpiryDate",label:e(s,{id:"apply_form_passport_expiry_date"}),trigger:"onConfirm",onClick:(n,p)=>{var u;(u=p.current)==null||u.open()},rules:[{required:!0}],initialValue:r.passportExpiryDate?new Date(r.passportExpiryDate):void 0,children:e(te,{children:n=>e("div",{className:`adm-input ${n?"text-default":"text-minor"}`,children:n?e(M,{value:n}):l("apply_form_please_enter")+l("apply_form_passport_expiry_date")})})}),e(o.Item,{name:"homeCountryIdType",label:e(s,{id:"apply_upgrade_home_country_type"}),rules:[{required:!0}],initialValue:r.homeCountryIdType,children:e(X,{columns:2,options:Z("HOME_COUNTRY_ID_TYPE")})}),e(o.Item,{name:"homeCountryIdNumber",label:e(s,{id:"apply_upgrade_home_country_num"}),rules:[{required:!0},{pattern:/^[a-zA-Z0-9-_ ]*$/,message:l("rule_alphabets_numbers_spaces")}],initialValue:r.homeCountryIdNumber,children:e(b,{maxLength:20,placeholder:l("apply_form_please_enter")+l("apply_upgrade_home_country_num")})})]})]}),e("div",{style:{background:"rgb(246, 248, 251)",height:"20px"}}),a(C,{block:!0,direction:"vertical",className:"px-5 pb-5 rounded-lg",children:[e(o.Item,{name:"email",label:e(s,{id:"apply_form_email"}),rules:[{required:!0,type:"email"}],initialValue:r.email,children:e(b,{maxLength:320,placeholder:l("apply_form_please_enter")+l("apply_form_email")})}),e(o.Item,{name:"mobile",label:e(s,{id:"apply_form_mobile_phone"}),rules:[{required:!0,validator:(n,p)=>{if(p!=null&&p.phone){if(p.areaCode==="+65"&&!/^[0-9]{8}$/.test(p.phone))return Promise.reject(l("rule_digits",{string:"8"}));if(p.areaCode==="+86"&&!/^[0-9]{11}$/.test(p.phone))return Promise.reject(l("rule_digits",{string:"11"}));if(!/^[0-9]{8,20}$/.test(p.phone))return Promise.reject(l("rule_digits",{string:"8-20"}))}return Promise.resolve()}}],initialValue:{areaCode:((h=(r==null?void 0:r.mobile)||t)==null?void 0:h.split(" ")[0])||"+65",phone:((x=(r==null?void 0:r.mobile)||t)==null?void 0:x.split(" ")[1])||""},children:e(Oe,{})})]})]}):e(v,{})}),We=g.memo(()=>{var h,x;const{manualData:t,appliedCards:r}=S(n=>n.cardApply),i=S(n=>n.user),d=he();g.useMemo(()=>({0:l("status_submitted"),1:l("status_processing"),2:l("status_approved"),3:l("status_supporting_documents"),4:l("status_rejected"),5:l("status_cancel")}),[]),console.log("appliedCards",r);const m=!!((x=(h=r[0])==null?void 0:h.productList[0])!=null&&x.tenCardsFlag);return t?a(C,{direction:"vertical",block:!0,children:[e(A,{title:a("div",{className:"flex justify-between items-center text-sm",children:[e(s,{id:"apply_form_declaration_particulars"}),e(j,{color:"primary",fill:"none",className:"text-xs font-normal",onClick:()=>{d("/manual/0?back=true")},children:e(s,{id:"apply_form_declaration_edit"})})]}),className:"p-0 rounded-lg",headerClassName:"px-5",children:a(C,{direction:"vertical",block:!0,className:"px-5",children:[a("div",{className:"flex justify-between items-center",children:[e(c,{className:"text-minor text-xs",id:"apply_form_name"}),e("span",{className:"w-2/4 text-xs text-right",children:t.custName})]}),a("div",{className:"flex justify-between items-center",children:[e(c,{className:"text-minor text-xs",id:"apply_form_gender"}),e("span",{className:"w-2/4 text-xs text-right",children:$("GENDER",t.gender)})]}),a("div",{className:"flex justify-between items-center",children:[e(c,{className:"text-minor text-xs",id:"apply_form_date_of_birth"}),e("span",{className:"w-2/4 text-xs text-right",children:e(M,{value:t.birthDate})})]}),!m&&a("div",{className:"flex justify-between items-center",children:[e(c,{className:"text-minor text-xs",id:"apply_form_maritial_status"}),e("span",{className:"w-2/4 text-xs text-right",children:$("MARITAL_STATUS",t==null?void 0:t.maritalStatus)})]}),a("div",{className:"flex justify-between items-center",children:[e(c,{className:"text-minor text-xs",id:"apply_upgrade_residence_status"}),e("span",{className:"w-2/4 text-xs text-right",children:$("RESIDENTIAL_STATUS_V2",t.residentialStatus)})]}),["C","P"].includes((t==null?void 0:t.residentialStatus)||"")&&a("div",{className:"flex justify-between items-center",children:[e(c,{className:"text-minor text-xs",id:"apply_form_NRIC_FIN"}),e("span",{className:"w-2/4 text-xs text-right",children:t.icNumber})]}),["A","P"].includes((t==null?void 0:t.residentialStatus)||"")&&a("div",{className:"flex justify-between items-center",children:[e(c,{className:"text-minor text-xs",id:"apply_form_nationality"}),e("span",{className:"w-2/4 text-xs text-right",children:$("COUNTRY_CODE_ISO2",t==null?void 0:t.nationality)})]}),["A"].includes(t.residentialStatus||"")&&a(v,{children:[a("div",{className:"flex justify-between items-center",children:[e(c,{className:"text-minor text-xs",id:"apply_form_passport_num"}),e("span",{className:"w-2/4 text-xs text-right",children:t.passport})]}),a("div",{className:"flex justify-between items-center",children:[e(c,{className:"text-minor text-xs",id:"apply_form_passport_expiry_date"}),e("span",{className:"w-2/4 text-xs text-right",children:e(M,{value:t.passportExpiryDate})})]}),a("div",{className:"flex justify-between items-center",children:[e(c,{className:"text-minor text-xs",id:"apply_upgrade_home_country_type"}),e("span",{className:"w-2/4 text-xs text-right",children:$("HOME_COUNTRY_ID_TYPE",t==null?void 0:t.homeCountryIdType)})]}),a("div",{className:"flex justify-between items-center",children:[e(c,{className:"text-minor text-xs",id:"apply_upgrade_home_country_num"}),e("span",{className:"w-2/4 text-xs text-right",children:t.homeCountryIdNumber})]})]}),a("div",{className:"flex justify-between items-center",children:[e(c,{className:"text-minor text-xs",id:"apply_form_email"}),e("span",{className:"w-2/4 text-xs text-right",children:t.email})]}),a("div",{className:"flex justify-between items-center",children:[e(c,{className:"text-minor text-xs",id:"apply_form_mobile_phone"}),e("span",{className:"w-2/4 text-xs text-right",children:t.mobile})]})]})}),e(A,{title:a("div",{className:"flex justify-between items-center text-sm",children:[e(s,{id:"apply_upgrade_address_info"}),e(j,{color:"primary",fill:"none",className:"text-xs font-normal",onClick:()=>{d("/manual/1?back=true")},children:e(s,{id:"apply_form_declaration_edit"})})]}),className:"p-0 rounded-lg ",headerClassName:"px-5",children:a(C,{direction:"vertical",block:!0,className:"px-5",children:[a("div",{className:"flex justify-between items-center",children:[e(c,{className:"text-minor text-xs",id:"apply_form_residential_addr"}),e("span",{className:"w-2/4 text-xs text-right",children:me(t==null?void 0:t.residentAddress)})]}),a("div",{className:"flex justify-between items-center",children:[e(c,{className:"text-minor text-xs",id:"apply_form_mailing_addr"}),e("span",{className:"w-2/4 text-xs text-right",children:me(t==null?void 0:t.billingAddress)})]})]})}),!m&&e(A,{title:a("div",{className:"flex justify-between items-center text-sm",children:[e(s,{id:"apply_upgrade_other_info"}),e(j,{color:"primary",fill:"none",className:"text-xs font-normal",onClick:()=>{d("/manual/2-1?back=true")},children:e(s,{id:"apply_form_declaration_edit"})})]}),className:"p-0 rounded-lg ",headerClassName:"px-5",children:a(C,{direction:"vertical",block:!0,className:"px-5",children:[a("div",{className:"flex justify-between items-center",children:[e(c,{className:"text-minor text-xs",id:"apply_form_self_employed"}),e("span",{className:"w-2/4 text-xs text-right capitalize",children:t.selfEmployment})]}),t.selfEmployment==="N"&&a("div",{className:"flex justify-between items-center",children:[e(c,{className:"text-minor text-xs",id:"apply_form_employer"}),e("span",{className:"w-2/4 text-xs text-right capitalize",children:t.companyName})]}),a("div",{className:"flex justify-between items-center",children:[e(c,{className:"text-minor text-xs",id:"apply_form_job_industry"}),e("span",{className:"w-2/4 text-xs text-right capitalize",children:$("JOB_INDUSTRY",t.jobIndustry)})]}),a("div",{className:"flex justify-between items-center",children:[e(c,{className:"text-minor text-xs",id:"apply_form_occupation"}),e("span",{className:"w-2/4 text-xs text-right capitalize",children:$("PROFESSION",t.profession)})]}),a("div",{className:"flex justify-between items-center",children:[e(c,{className:"text-minor text-xs",id:"apply_form_length_of_employment_b"}),a("span",{className:"w-2/4 text-xs text-right capitalize",children:[t.serviceYears,l("apply_form_years"),"  ",t.serviceMonths,l("apply_form_months")]})]}),a("div",{className:"flex justify-between items-center",children:[e(c,{className:"text-minor text-xs",id:"apply_form_gross_annual_income"}),e("span",{className:"w-2/4 text-xs text-right capitalize",children:e(pe,{value:Number(t.incomeYear),style:"currency",currency:"SGD"})})]})]})}),["identityFiles","passportFiles","incomeProofFiles","addressProofFiles","studentIdFiles","parentConsentFiles","otherDetailsFiles"].find(n=>{var p;return t&&((p=t[n])==null?void 0:p.length)})&&e(A,{title:a("div",{className:"flex justify-between items-center text-sm",children:[e(s,{id:"apply_form_upload_docs"}),e(j,{color:"primary",fill:"none",className:"text-xs font-normal",onClick:()=>{d("/manual/2-2?back=true")},children:e(s,{id:"apply_form_declaration_edit"})})]}),className:"p-0 rounded-lg ",headerClassName:"px-5",children:e(C,{direction:"vertical",block:!0,className:"px-5",children:["identityFiles","passportFiles","incomeProofFiles","addressProofFiles","studentIdFiles","parentConsentFiles","otherDetailsFiles"].filter(n=>{var p;return(p=t[n])==null?void 0:p.length}).map(n=>e(Je,{title:l(`apply_manual_upload_${n}`),data:t[n]},n))})}),e(A,{title:a("div",{className:"flex justify-between items-center text-sm",children:[e(s,{id:"apply_form_card_personalization"}),e(j,{color:"primary",fill:"none",className:"text-xs font-normal",onClick:()=>{d("/manual/3?back=true")},children:e(s,{id:"apply_form_declaration_edit"})})]}),className:"p-0 rounded-lg ",headerClassName:"px-5",children:a(C,{direction:"vertical",block:!0,className:"px-5",children:[a("div",{className:"flex justify-between items-center",children:[e(c,{className:"text-minor text-xs",id:"apply_form_credit_lit_preference"}),e("span",{className:"w-2/4 text-xs text-right capitalize",children:(t==null?void 0:t.determineLimitFlag)==="N"?e(pe,{value:Number(t.preCreditLimit),style:"currency",currency:"SGD"}):e(s,{id:"apply_form_let_dcs_determine"})})]}),a("div",{className:"flex justify-between items-center",children:[e(c,{className:"text-minor text-xs",id:"apply_form_name_on_card"}),e("span",{className:"w-2/4 text-xs text-right capitalize",children:t.preNameOnCard})]})]})}),e(A,{title:e("div",{children:e(s,{id:"apply_form_declaration_consent_title"})}),children:a(C,{direction:"vertical",block:!0,children:[e(o.Item,{name:"dncFlag",children:e(H,{children:a("p",{className:"ml-3",children:[" ",l("apply_form_declaration_1a")]})})}),e(o.Item,{name:"usaTaxResident",children:e(H,{children:a("p",{className:"ml-3",children:[l("apply_form_declaration_3a"),e("br",{}),l("apply_form_declaration_3b"),e("br",{}),l("apply_form_declaration_3c")]})})}),e(o.Item,{name:"pdpaFlag",rules:[{validator:(n,p)=>p?Promise.resolve():Promise.reject(new Error(l("apply_form_please_check")))}],children:e(H,{children:a("div",{className:"ml-3",children:[e("span",{className:"text-red",children:"*"}),e(s,{id:"apply_form_authorization_text2"}),e("a",{href:i.dcsCardDeclaration||"https://cards.dcscc.com/card-declaration",className:"text-blue",children:e(s,{id:"apply_form_dcs_charge_credit1"})}),e(s,{id:"apply_form_dcs_and"}),e("a",{href:i.cardsTermsConditions||"https://dcscc.com/legal/cards-tnc",className:"text-blue ",children:e(s,{id:"apply_form_conditions"})}),m&&a(v,{children:[e(s,{id:"apply_form_dcs_and"}),e("a",{href:i.dcsAccConditionsTerms||"https://dcscc.com/legal/d-vault-tnc",className:"text-blue ",children:e(s,{id:"apply_guide_lite_va_conditions"})})]}),e(s,{id:"apply_form_application"})]})})})]})})]}):e(v,{})}),me=t=>{if(!t)return"-";if(t.country==="SG")return`${t.block} ${t.street} # ${t.floor}-${t.unit} ${t.building||"-"} ${t.country} (${t.postal})`;if(t!=null&&t.line1)return`${t.line1} ${t==null?void 0:t.line2}`},Je=({title:t,data:r})=>a("div",{className:"flex justify-between text-xs",children:[e("span",{children:t}),e("div",{children:r==null?void 0:r.map((i,d)=>e("p",{className:"text-blue",children:i.attachedName},d))})]}),Ke=g.memo(()=>{const{manualData:t}=S(r=>r.cardApply);return t?e(A,{headerClassName:"px-5",title:e("div",{children:e(c,{id:"apply_upgrade_occupation_income"})}),className:"p-0 rounded-lg",children:a(C,{direction:"vertical",block:!0,className:"px-5",children:[e(o.Item,{name:"selfEmployment",rules:[{required:!0}],initialValue:t.selfEmployment==="Y",children:e(H,{defaultChecked:t.selfEmployment==="Y",children:e(s,{id:"apply_form_i_am_self_employed"})})}),e(o.Subscribe,{to:["selfEmployment"],children:({selfEmployment:r})=>{if(console.log("selfEmployment",r),!r)return e(o.Item,{name:"companyName",label:e(s,{id:"apply_form_employer"}),rules:[{required:!0},{pattern:/^[A-Za-z-_ ]*$/,message:l("rule_alphabets_spaces_hyphens")}],children:e(b,{maxLength:80,autoCapitalize:"characters",placeholder:l("apply_form_please_enter")+l("apply_form_employer")})})}}),e(o.Item,{name:"jobIndustry",label:e(s,{id:"apply_form_job_industry"}),rules:[{required:!0}],initialValue:t.jobIndustry,children:e(R,{dictType:"JOB_INDUSTRY"})}),e(o.Item,{name:"profession",label:e(s,{id:"apply_form_occupation"}),rules:[{required:!0}],initialValue:t.profession,children:e(R,{dictType:"PROFESSION"})}),e(o.Item,{name:"yearsWorking",trigger:"onConfirm",label:e(s,{id:"apply_form_length_of_employment"}),rules:[{required:!0}],initialValue:[t.serviceYears,t.serviceMonths],onClick:(r,i)=>{var d;(d=i.current)==null||d.open()},children:e($e,{columns:[new Array(99).fill(1).map((r,i)=>({label:`${++i} ${l("apply_form_years")}`,value:i})),new Array(12).fill(1).map((r,i)=>({label:`${i} ${l("apply_form_months")}`,value:i}))],children:r=>(console.log("valuevalue",r),a("div",{className:"adm-input flex justify-between",style:{color:r.length?"#25435f":"#909daa"},children:[e("span",{children:r.length?r.map(i=>i==null?void 0:i.label).join(" "):l("apply_form_please_choose")}),e(Ye,{color:"#000",fontSize:12})]}))})}),e(o.Item,{name:"incomeYear",label:a("p",{children:[e(s,{id:"apply_form_gross_annual_income"}),"(S$)"]}),rules:[{required:!0},{pattern:/^([1-9]{1}\d*)(\.\d{1,2})?$/,message:l("rule_invalid_input")}],initialValue:Qe(t.incomeYear),children:e(b,{maxLength:10,autoCapitalize:"characters",placeholder:l("apply_form_please_enter")+l("apply_form_gross_annual_income")})}),t.isAlien==="0"&&e(o.Item,{name:"empPassExpiryDate",label:e(s,{id:"apply_form_employment_pass_expiry"}),trigger:"onConfirm",onClick:(r,i)=>{var d;(d=i.current)==null||d.open()},rules:[{required:!0}],initialValue:t.empPassExpiryDate?new Date(t.empPassExpiryDate):void 0,children:e(te,{children:r=>e("div",{className:`adm-input ${r?"text-default":"text-minor"}`,children:r?e(M,{value:r}):l("apply_form_please_enter")+l("apply_form_employment_pass_expiry")})})})]})}):e(v,{})}),Qe=t=>t?`${parseInt(`${(Number(t)||0)/100}`)}`:"",Xe=g.memo(()=>{var m;const{manualData:t,appliedCards:r}=S(h=>h.cardApply),i=r[0]&&((m=r[0].productList[0])==null?void 0:m.fixedLimit)==="1",{showCardNameMaskOnCardFlag:d}=S(h=>h.user);return t?a("div",{children:[!i&&e(A,{headerClassName:"px-5",title:e("div",{children:e(c,{id:"apply_form_credit_lit_preference"})}),className:"p-0 rounded-lg",children:a(C,{direction:"vertical",block:!0,className:"px-5",children:[e(o.Item,{name:"determineLimitFlag",rules:[{required:!0}],initialValue:"Y",children:e(q.Group,{children:a(C,{direction:"vertical",children:[e(q,{value:"Y",children:e(s,{id:"apply_form_let_dcs_determine"})}),e(q,{value:"N",children:e(s,{id:"apply_form_set_my_preferred_limit"})})]})})}),e(o.Subscribe,{to:["determineLimitFlag"],children:({determineLimitFlag:h})=>{if(console.log("determineLimitFlag",h),h!=="Y")return a("div",{className:"mt-10",children:[e(o.Item,{name:"preCreditLimit",rules:[{required:!0}],initialValue:1,children:e(Me,{residentPopover:!0,step:1,max:150,min:1,popover:x=>e("span",{children:x*1e3}),icon:e(et,{})})}),a("div",{className:"flex justify-between text-xs",children:[e("span",{children:"S$ 1,000"}),e("span",{children:"S$ 150,000"})]}),e(c,{className:"text-xs text-minor mx-6 my-6 text-center",id:"apply_form_credit_limit_tip"})]})}})]})}),e(A,{headerClassName:"px-5 ",title:e("div",{children:e(c,{id:"apply_form_name_on_card"})}),className:"p-0 rounded-lg mt-4",children:a("div",{className:"px-5",children:[e(o.Item,{name:"preNameOnCard",label:e(s,{id:"apply_form_embossed_name"}),rules:[{required:!0}],initialValue:t==null?void 0:t.preNameOnCard,children:e(b,{maxLength:19,minLength:2,disabled:!0,autoCapitalize:"characters"})}),r.map(h=>a("div",{className:"mt-5 relative",children:[e(Ee,{src:h.channelCardShowImage,alt:h.channelCardName}),e("span",{style:{position:"absolute",bottom:0,left:0},className:"text-base font-medium text-white pl-5 pb-5",children:d?t==null?void 0:t.preNameOnCard:""})]},h.channelCreditCardId))]})})]}):e(v,{})}),et=()=>a("svg",{width:"38",height:"18",viewBox:"0 0 38 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e("rect",{x:"0.5",y:"0.5",width:"37",height:"17",rx:"8.5",fill:"#3366FF",stroke:"#E3FAFF"}),e("rect",{x:"16",y:"4",width:"10",height:"2",rx:"1",transform:"rotate(90 16 4)",fill:"#ACF0FF"}),e("rect",{x:"20",y:"4",width:"10",height:"2",rx:"1",transform:"rotate(90 20 4)",fill:"#ACF0FF"}),e("rect",{x:"24",y:"4",width:"10",height:"2",rx:"1",transform:"rotate(90 24 4)",fill:"#ACF0FF"})]}),tt=g.memo(()=>{var r;const{manualData:t}=S(i=>i.cardApply);return t?a("div",{children:[e(A,{title:a("div",{children:[e(s,{id:"apply_form_residential_addr"}),e(c,{className:"font-normal text-xs text-minor",id:"apply_upgrade_header_tip"})]}),className:"p-0 rounded-lg shadow-lg bg-white",headerClassName:"px-5",children:a("div",{className:"px-5",children:[e(o.Item,{name:["residentAddress","country"],label:e(s,{id:"apply_form_property_country"}),rules:[{required:!0}],initialValue:((r=t.residentAddress)==null?void 0:r.country)||"SG",normalize:i=>i[0],children:e(R,{dictType:"COUNTRY_CODE_ISO2"})}),e(o.Subscribe,{to:["residentAddress","country"],children:({residentAddress:i})=>{var d,m,h,x,n,p,u;return(i==null?void 0:i.country)==="SG"?a(v,{children:[e(o.Item,{name:["residentAddress","postal"],label:e(s,{id:"apply_form_postal_code"}),rules:[{required:!0},{pattern:/^[0-9]{6,6}$/,message:l("rule_digits",{string:6})}],initialValue:(d=t.residentAddress)==null?void 0:d.postal,children:e(b,{placeholder:l("apply_form_please_enter")+l("apply_form_postal_code")})}),e(o.Item,{name:["residentAddress","street"],label:e(s,{id:"apply_form_street_name"}),rules:[{required:!0},{pattern:/^[\w\s]{1,66}$/,message:l("rule_alphabets_numbers_spaces")}],initialValue:(m=t.residentAddress)==null?void 0:m.street,children:e(b,{placeholder:l("apply_form_please_enter")+l("apply_form_street_name")})}),e(o.Item,{name:["residentAddress","block"],label:e(s,{id:"apply_form_block"}),rules:[{required:!0},{pattern:/^[\w\s]{1,10}$/,message:l("rule_characters",{string:"1-10"})}],initialValue:(h=t.residentAddress)==null?void 0:h.block,children:e(b,{placeholder:l("apply_form_please_enter")+l("apply_form_block")})}),e(o.Item,{name:["residentAddress","floor"],label:e(s,{id:"apply_upgrade_floor_name"}),rules:[{required:!0},{pattern:/^[A-Za-z0-9]{1,5}$/,message:l("rule_characters",{string:"1-5"})}],initialValue:(x=t.residentAddress)==null?void 0:x.floor,help:e(s,{id:"apply_upgrade_input_tip"}),children:e(b,{placeholder:l("apply_form_please_enter")+l("apply_upgrade_floor_name")})}),e(o.Item,{name:["residentAddress","unit"],label:e(s,{id:"apply_form_unit"}),rules:[{required:!0},{pattern:/^[0-9]{1,5}$/,message:l("rule_digits",{string:"1-5"})}],initialValue:(n=t.residentAddress)==null?void 0:n.unit,help:e(s,{id:"apply_upgrade_input_tip2"}),children:e(b,{placeholder:l("apply_form_please_enter")+l("apply_form_unit")})}),e(o.Item,{name:["residentAddress","building"],label:e(s,{id:"apply_form_building"}),rules:[{pattern:/^[\w\s]{1,66}$/,message:l("rule_alphabets_numbers_spaces")}],initialValue:(p=t.residentAddress)==null?void 0:p.building,children:e(b,{placeholder:l("apply_form_please_enter")+l("apply_form_building")})})]}):e(o.Item,{name:["residentAddress","line1"],label:e(s,{id:"apply_form_permanent_home_addr"}),rules:[{required:!0},{pattern:/^[\w\s-]*$/,message:l("rule_alphabets_numbers_spaces")}],initialValue:(u=t.residentAddress)==null?void 0:u.line1,children:e(ce,{showCount:!0,maxLength:200,placeholder:l("apply_form_please_enter")+l("apply_form_permanent_home_addr")})})}})]})}),e(A,{title:a("div",{children:[e(s,{id:"apply_form_mailing_addr"}),e(c,{className:"font-normal text-xs text-minor",id:"apply_upgrade_mailing_address_tip1"}),e(c,{className:"font-normal text-xs text-minor",id:"apply_upgrade_mailing_address_tip3"})]}),className:"mt-5 p-0 rounded-lg shadow-lg bg-white",headerClassName:"px-5",children:a(C,{direction:"vertical",className:"px-5",block:!0,children:[e(o.Item,{initialValue:t.sameResidentialFlag||"Y",name:"sameResidentialFlag",rules:[{required:!0}],children:e(q.Group,{children:a(C,{children:[e(q,{value:"Y",children:e(s,{id:"apply_form_same_as_residential_addr"})}),e(q,{value:"N",children:e(s,{id:"apply_upgrade_other_addresses"})})]})})}),e(o.Subscribe,{to:["sameResidentialFlag"],children:({sameResidentialFlag:i})=>{var d;if(console.log("sameResidentialFlag",i),i!=="Y")return a(v,{children:[e(o.Item,{name:["billingAddress","country"],label:e(s,{id:"apply_form_property_country"}),rules:[{required:!0}],initialValue:((d=t.billingAddress)==null?void 0:d.country)||"SG",normalize:m=>m[0],children:e(R,{dictType:"COUNTRY_CODE_ISO2"})}),e(o.Subscribe,{to:["billingAddress","country"],children:({billingAddress:m})=>{var h,x,n,p,u,N,w;return console.log("billingAddress.country",m),(m==null?void 0:m.country)==="SG"?a(v,{children:[e(o.Item,{name:["billingAddress","postal"],label:e(s,{id:"apply_form_postal_code"}),rules:[{required:!0},{pattern:/^[0-9]{6,6}$/,message:l("rule_digits",{string:6})}],initialValue:(h=t.billingAddress)==null?void 0:h.postal,children:e(b,{placeholder:l("apply_form_please_enter")+l("apply_form_postal_code")})}),e(o.Item,{name:["billingAddress","street"],label:e(s,{id:"apply_form_street_name"}),rules:[{required:!0},{pattern:/^[\w\s]{1,66}$/,message:l("rule_alphabets_numbers_spaces")}],initialValue:(x=t.billingAddress)==null?void 0:x.street,children:e(b,{placeholder:l("apply_form_please_enter")+l("apply_form_street_name")})}),e(o.Item,{name:["billingAddress","block"],label:e(s,{id:"apply_form_block"}),rules:[{required:!0},{pattern:/^[\w\s]{1,10}$/,message:l("rule_characters",{string:"1-10"})}],initialValue:(n=t.billingAddress)==null?void 0:n.block,children:e(b,{placeholder:l("apply_form_please_enter")+l("apply_form_block")})}),e(o.Item,{name:["billingAddress","floor"],label:e(s,{id:"apply_upgrade_floor_name"}),rules:[{required:!0},{pattern:/^[A-Za-z0-9]{1,5}$/,message:l("rule_characters",{string:"1-5"})}],initialValue:(p=t.billingAddress)==null?void 0:p.floor,help:e(s,{id:"apply_upgrade_input_tip"}),children:e(b,{placeholder:l("apply_form_please_enter")+l("apply_upgrade_floor_name")})}),e(o.Item,{name:["billingAddress","unit"],label:e(s,{id:"apply_form_unit"}),rules:[{required:!0},{pattern:/^[0-9]{1,5}$/,message:l("rule_digits",{string:"1-5"})}],initialValue:(u=t.billingAddress)==null?void 0:u.unit,help:e(s,{id:"apply_upgrade_input_tip2"}),children:e(b,{placeholder:l("apply_form_please_enter")+l("apply_form_unit")})}),e(o.Item,{name:["billingAddress","building"],label:e(s,{id:"apply_form_building"}),rules:[{pattern:/^[\w\s]{1,66}$/,message:l("rule_alphabets_numbers_spaces")}],initialValue:(N=t.billingAddress)==null?void 0:N.building,children:e(b,{placeholder:l("apply_form_please_enter")+l("apply_form_building")})})]}):m!=null&&m.country?e(o.Item,{name:["billingAddress","line1"],label:e(s,{id:"apply_form_permanent_home_addr"}),rules:[{required:!0},{pattern:/^[\w\s-]*$/,message:l("rule_alphabets_numbers_spaces")}],initialValue:(w=t.billingAddress)==null?void 0:w.line1,children:e(ce,{showCount:!0,maxLength:200,placeholder:l("apply_form_please_enter")+l("apply_form_permanent_home_addr")})}):e(v,{})}})]})}})]})})]}):e(v,{})}),rt=g.memo(()=>{const{manualData:t,appliedCards:r}=S(d=>d.cardApply),i=g.useMemo(()=>{var d;return r[0]&&((d=r[0].productList[0])==null?void 0:d.tenCardsFlag)},[r]);return t?a("div",{className:"pt-3",children:[e(c,{id:"apply_guide_other_tip1",className:"text-minor text-xs"}),e(c,{id:"apply_guide_other_tip2",className:"text-minor text-xs my-2"}),e(A,{headerClassName:"px-5",title:e("div",{children:e(c,{id:"apply_upgrade_occupation_income"})}),className:"p-0 rounded-lg",children:a(C,{direction:"vertical",block:!0,style:{background:"rgb(246, 248, 251)"},children:[t.isAlien==="0"?e(o.Item,{className:"upload-box",name:"passportFiles",required:!0,label:a("div",{children:[e(c,{className:"font-bold text-sm mb-2",id:"apply_guide_passport"}),e(c,{className:"text-minor text-xs mb-2",id:"apply_guide_passport_tip"})]}),children:e(E,{attachedType:7})}):e(o.Item,{className:"upload-box",name:"identityFiles",required:!0,label:a("div",{children:[e(c,{className:"font-bold text-sm mb-2",id:"apply_manual_upload_your_id_document"}),e(c,{className:"text-minor text-xs mb-2",id:"apply_guide_id_tip"})]}),children:e(E,{attachedType:1,maxCount:2})}),!i&&a(C,{direction:"vertical",block:!0,style:{background:"rgb(246, 248, 251)"},children:[e(o.Item,{name:"incomeProofFiles",required:!0,label:a("div",{children:[e(c,{className:"font-bold text-sm mb-2",id:"apply_manual_upload_incomeProofFiles"}),e(c,{className:"text-minor text-xs mb-2",id:"apply_guide_proof_income_tip"})]}),className:"upload-box",children:e(E,{attachedType:2})}),e(o.Item,{className:"upload-box",name:"addressProofFiles",required:!0,label:a("div",{className:"",children:[e(c,{className:"font-bold text-sm mb-2",id:"apply_manual_upload_addressProofFiles"}),t.isAlien==="1"&&e(c,{className:"text-minor text-xs",id:"apply_guide_proof_address_tip1"}),e(c,{className:"text-minor text-xs mb-2",id:"apply_guide_proof_address_tip2"})]}),children:e(E,{attachedType:3})}),t.profession==="1191"&&e(o.Item,{className:"upload-box",name:"studentIdFiles",required:!0,label:e("div",{children:e(c,{className:"font-bold text-sm mb-2",id:"apply_manual_upload_studentIdFiles"})}),children:e(E,{attachedType:4})}),Number(t.age)<21&&e(o.Item,{className:"upload-box",name:"parentConsentFiles",required:!0,label:a("div",{className:"",children:[e(c,{className:"font-bold text-sm mb-2",id:"apply_manual_upload_parentConsentFiles"}),a("p",{className:"text-minor text-xs mb-2",children:[e(s,{id:"apply_guide_parent_example"}),e("a",{className:"text-blue underline ml-2",href:"https://d17qh48k9885fj.cloudfront.net/dcs-public/app/rn/parent-consent-download.pdf",children:l("apply_guide_download")})]})]}),children:e(E,{attachedType:5})})]}),e(o.Item,{className:"upload-box",name:"otherDetailsFiles",required:!0,label:a("div",{children:[e(c,{className:"font-bold text-sm mb-2",id:"apply_manual_upload_otherDetailsFiles"}),e(c,{className:"text-minor text-xs mb-2",id:"apply_guide_upload_other_tip"})]}),children:e(E,{attachedType:6})})]})})]}):e(v,{})}),Nt=g.memo(()=>{const t=he(),r=ue(),[i]=o.useForm();Pe();const[d]=Ve(),m=je(),{phoneNumber:h,areaCode:x}=S(y=>y.user.userInfo)||{},{appliedCardsFlat:n,channelApplyNo:p,applyExtraParms:u,appliedCards:N,manualData:w}=S(y=>y.cardApply),L=S(y=>y.app.locale),[O,z]=g.useState(),[F,ye]=g.useState(parseInt(m.id||"")),[fe,re]=g.useState(!0),[xe,W]=g.useState(!1),[le,J]=g.useState(!1),ae=g.useMemo(()=>{var y;return N[0]&&((y=N[0].productList[0])==null?void 0:y.tenCardsFlag)},[N]),ge=(y,_)=>(i.setFieldValue("otp",y),i.setFieldValue("otpPrefix",_),K(i.getFieldsValue(!0),!0)),K=g.useCallback((y,_)=>Q(void 0,null,function*(){W(!0);const f=V({stepNo:F+1,channelApplyNo:p,myinfoApplyNo:"",applicationType:3,cardAndProductList:n,mobile:void 0},Ne(F,y));if(!_&&f.stepNo===1&&f.mobile!==`${x} ${h}`)return W(!1),J(!0);try{const k=yield Y("/dcs-apply-online/card/apply/login/saveApplication/manual/v2",f);if(!k)return;if(console.log("params.stepNo",m.id,F,ae),k.applyCardsFlag){z(k.applyCards);return}if(z(void 0),J(!1),r(qe(k.channelApplyNo)),f.stepNo===6)yield Y("/dcs-apply-online/card/apply/login/sumbitApplication/v5",oe(V({},u),{channelApplyNo:p,myinfoApplyNo:"",applicationType:3})),t("/demotion-card");else if(m.id==="2-1")t("/manual/2-2");else{const{back:G}=Object.fromEntries(d.entries());if(G)return t(-1);t(`/manual/${F+1}${F===1?ae?"-2":"-1":""}`)}}catch(k){return Promise.reject()}finally{W(!1)}}),[F,le,n,p]),be=()=>Q(void 0,null,function*(){re(!0),console.log("init - channelApplyNo",p);let y=V({},w);try{if(p){const _=yield Y("/dcs-apply-online/card/apply/login/queryApplicationbyStep/v4",{channelApplyNo:p,myinfoApplyNo:"",applicationType:3,cardAndProductList:n});y=Object.assign(y,_)}if(!p&&F===0){const _=yield Y("/dcs-apply-online/card/apply/login/queryLastestApplication",{applicationType:3});if(console.log("res1",_),_!=null&&_.channelApplyNo){const f=yield Y("/dcs-apply-online/card/apply/login/queryApplicationbyStep/v4",{channelApplyNo:_.channelApplyNo,myinfoApplyNo:"",applicationType:3,cardAndProductList:n});f&&(y=lt(f))}}}catch(_){}return re(!1),y.residentialStatus=y.residentialStatus||(L==="en-SG"?"C":"A"),y.isAlien=["C","P"].includes(y.residentialStatus||"")?"1":"0",y.homeCountryIdType=y.homeCountryIdType!==void 0?String(y.homeCountryIdType):void 0,r(_e(y)),y}),Ne=(y,_)=>{var k,G;const f=V({},_);return Object.keys(_).forEach(T=>{_[T]&&typeof _[T]=="string"&&(f[T]=_[T].toLocaleUpperCase())}),y===0?(console.log("manualData?.residentialStatus",w==null?void 0:w.residentialStatus),f.cardIssuer="G",f.salesStaff=(u==null?void 0:u.staff_id)||"",f.location=(u==null?void 0:u.location)||"",f.mobile=`${(k=_.mobile)==null?void 0:k.areaCode} ${(G=_.mobile)==null?void 0:G.phone}`,f.homeCountryIdType=_.homeCountryIdType?_.homeCountryIdType[0]:"",f.passportExpiryDate=_.passportExpiryDate?ee(_.passportExpiryDate).format("YYYY-MM-DD"):void 0,f.birthDate=ee(_.birthDate).format("YYYY-MM-DD"),f.residentialStatus=w==null?void 0:w.residentialStatus):y===1?f.billingAddress=_.billingAddress||_.residentAddress:y===2?m.id==="2-1"?(f.incomeYear=at(_.incomeYear),f.selfEmployment=_.selfEmployment?"Y":"N",f.serviceYears=_.yearsWorking[0],f.serviceMonths=_.yearsWorking[1],f.stepNo=3):m.id==="2-2"&&(Object.keys(_).forEach(T=>{f[T]=_[T].map(Ce=>Ce.extra)}),f.stepNo=4):y===4&&(f.pdpaFlag=_.pdpaFlag?"Y":"N",f.usaTaxResident=_.usaTaxResident?"Y":"N",f.dncFlag=_.dncFlag?"Y":"N",f.stepNo=6),console.log("getParms",y,f),f};return g.useEffect(()=>{be(),m.id&&ye(parseInt(m.id))},[m]),a("div",{children:[F<4&&a(D,{current:F,className:"bg-white ",children:[e(D.Step,{title:l("apply_upgrade_personal_info")}),e(D.Step,{title:l("apply_upgrade_address_info")}),e(D.Step,{title:l("apply_upgrade_other_info")}),e(D.Step,{title:l("apply_form_card_personalization")})]}),e(o,{className:"m-3 border-0",form:i,onFinish:K,requiredMarkStyle:"text-optional",footer:e(j,{block:!0,type:"submit",color:"primary",size:"large",shape:"rounded",loading:xe,children:e(s,{id:F===6?"common_submit":"common_next"})}),children:fe?e(Le.Paragraph,{lineCount:20,animated:!0}):a(v,{children:[F===0&&e(He,{}),F===1&&e(tt,{}),m.id==="2-1"&&e(Ke,{}),m.id==="2-2"&&e(rt,{}),F===3&&e(Xe,{}),F===4&&e(We,{})]})}),e(De,{show:le,onConfirm:ge,onClose:()=>J(!1)}),e(Re,{open:!0,setOpen:()=>null,applyCards:O,onOk:()=>K(i.getFieldsValue(!0),!0)})]})}),lt=t=>(t!=null&&t.identityFiles&&delete t.identityFiles,t!=null&&t.incomeProofFiles&&delete t.incomeProofFiles,t!=null&&t.addressProofFiles&&delete t.addressProofFiles,t!=null&&t.studentIdFiles&&delete t.studentIdFiles,t!=null&&t.parentConsentFiles&&delete t.parentConsentFiles,t!=null&&t.otherDetailsFiles&&delete t.otherDetailsFiles,t!=null&&t.passportFiles&&delete t.passportFiles,t!=null&&t.preCreditLimit&&delete t.preCreditLimit,t),at=t=>{if(t)return`${parseInt(`${(Number(t)||0)*100}`)}`};export{Nt as default};

import{r as l,a8 as b,a6 as S,ba as B,a5 as c,a7 as F,aa as x,a9 as p,I as _,B as y}from"./index-6701bc4a.js";function N(r){return l.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},r,{style:Object.assign({verticalAlign:"-0.125em"},r.style),className:["antd-mobile-icon",r.className].filter(Boolean).join(" ")}),l.createElement("g",{id:"SearchOutline-SearchOutline",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},l.createElement("g",{id:"SearchOutline-编组"},l.createElement("rect",{id:"SearchOutline-矩形",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),l.createElement("path",{d:"M10.2434135,10.1505371 C17.2346315,3.28315429 28.5696354,3.28315429 35.5608534,10.1505371 C42.3159331,16.7859644 42.5440954,27.4048667 36.2453405,34.3093889 L43.7095294,41.6422249 C43.8671196,41.7970419 43.8693677,42.0502979 43.7145508,42.2078881 C43.7128864,42.2095822 43.7112069,42.2112616 43.7095126,42.2129259 L42.1705322,43.7246464 C42.014915,43.8775072 41.7655181,43.8775006 41.6099089,43.7246316 L34.0775268,36.3248916 L34.0775268,36.3248916 C27.0485579,41.8551751 16.7593545,41.4200547 10.2434135,35.0195303 C3.25219551,28.1521474 3.25219551,17.0179199 10.2434135,10.1505371 Z M12.3532001,12.2229532 C6.52718516,17.9457722 6.52718516,27.2242951 12.3532001,32.9471142 C18.1792151,38.6699332 27.6250517,38.6699332 33.4510667,32.9471142 C39.2770817,27.2242951 39.2770817,17.9457722 33.4510667,12.2229532 C27.6250517,6.50013419 18.1792151,6.50013419 12.3532001,12.2229532 Z",id:"SearchOutline-形状",fill:"currentColor",fillRule:"nonzero"}))))}const o="adm-search-bar",O={clearable:!0,onlyShowClearWhenFocus:!1,showCancelButton:!1,defaultValue:"",clearOnCancel:!0},R=l.forwardRef((r,w)=>{const{locale:h,searchBar:f={}}=b(),n=S(O,f,{cancelText:h.common.cancel},r),s=B(c.createElement(N,null),f.searchIcon,r.icon,r.searchIcon),[i,g]=F(n),[u,C]=l.useState(!1),t=l.useRef(null),v=l.useRef(!1);l.useImperativeHandle(w,()=>({clear:()=>{var e;return(e=t.current)===null||e===void 0?void 0:e.clear()},focus:()=>{var e;return(e=t.current)===null||e===void 0?void 0:e.focus()},blur:()=>{var e;return(e=t.current)===null||e===void 0?void 0:e.blur()},get nativeElement(){var e,a;return(a=(e=t.current)===null||e===void 0?void 0:e.nativeElement)!==null&&a!==void 0?a:null}}));const E=()=>{let e;return typeof n.showCancelButton=="function"?e=n.showCancelButton(u,i):e=n.showCancelButton&&u,e&&c.createElement("div",{className:`${o}-suffix`},c.createElement(y,{fill:"none",className:`${o}-cancel-button`,onClick:()=>{var a,d,m;n.clearOnCancel&&((a=t.current)===null||a===void 0||a.clear()),(d=t.current)===null||d===void 0||d.blur(),(m=n.onCancel)===null||m===void 0||m.call(n)},onMouseDown:a=>{a.preventDefault()}},n.cancelText))};return x(n,c.createElement("div",{className:p(o,{[`${o}-active`]:u})},c.createElement("div",{className:`${o}-input-box`},s&&c.createElement("div",{className:`${o}-input-box-icon`},s),c.createElement(_,{ref:t,className:p(`${o}-input`,{[`${o}-input-without-icon`]:!s}),value:i,onChange:g,maxLength:n.maxLength,placeholder:n.placeholder,clearable:n.clearable,onlyShowClearWhenFocus:n.onlyShowClearWhenFocus,onFocus:e=>{var a;C(!0),(a=n.onFocus)===null||a===void 0||a.call(n,e)},onBlur:e=>{var a;C(!1),(a=n.onBlur)===null||a===void 0||a.call(n,e)},onClear:n.onClear,type:"search",enterKeyHint:"search",onEnterPress:()=>{var e,a;v.current||((e=t.current)===null||e===void 0||e.blur(),(a=n.onSearch)===null||a===void 0||a.call(n,i))},"aria-label":h.SearchBar.name,onCompositionStart:e=>{var a;v.current=!0,(a=n.onCompositionStart)===null||a===void 0||a.call(n,e)},onCompositionEnd:e=>{var a;v.current=!1,(a=n.onCompositionEnd)===null||a===void 0||a.call(n,e)}})),E()))});export{R as S};
